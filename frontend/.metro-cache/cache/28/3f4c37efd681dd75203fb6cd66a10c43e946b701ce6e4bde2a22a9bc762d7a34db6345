{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/pushNotifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":136,"index":296}}],"key":"pacSeurS2lh+gpQJVOM5Oqathn8=","exportNames":["*"],"imports":1}},{"name":"./LanguageContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":297},"end":{"line":4,"column":48,"index":345}}],"key":"UDwZfzoSc/8fKq1/o42iNVtUjYk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _utilsPushNotifications = require(_dependencyMap[2], \"../utils/pushNotifications\");\n  var _LanguageContext = require(_dependencyMap[3], \"./LanguageContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [isAuthenticated, setIsAuthenticated] = (0, _react.useState)(false);\n    const [userEmail, setUserEmail] = (0, _react.useState)(null);\n    const [isAdmin, setIsAdmin] = (0, _react.useState)(false);\n    const [authToken, setAuthToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const {\n      language\n    } = (0, _LanguageContext.useLanguage)();\n    (0, _react.useEffect)(() => {\n      checkAuthStatus();\n    }, []);\n\n    // Setup notification listeners\n    (0, _react.useEffect)(() => {\n      const listeners = (0, _utilsPushNotifications.setupNotificationListeners)();\n      return () => {\n        (0, _utilsPushNotifications.removeNotificationListeners)(listeners);\n      };\n    }, []);\n    const checkAuthStatus = async () => {\n      try {\n        const email = await AsyncStorage.default.getItem('userEmail');\n        const token = await AsyncStorage.default.getItem('authToken');\n        if (email) {\n          setIsAuthenticated(true);\n          setUserEmail(email);\n          setIsAdmin(email === 'admin@nutrikids.com');\n          setAuthToken(token);\n        }\n      } catch (error) {\n        console.error('Error checking auth status:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, token) => {\n      try {\n        await AsyncStorage.default.setItem('userEmail', email);\n        if (token) {\n          await AsyncStorage.default.setItem('authToken', token);\n        }\n        setIsAuthenticated(true);\n        setUserEmail(email);\n        setIsAdmin(email === 'admin@nutrikids.com');\n        setAuthToken(token || null);\n\n        // Registra per le notifiche push\n        (0, _utilsPushNotifications.registerForPushNotificationsAsync)(email, language).catch(err => console.error('Failed to register push notifications:', err));\n      } catch (error) {\n        console.error('Error during login:', error);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('userEmail');\n        await AsyncStorage.default.removeItem('authToken');\n        await AsyncStorage.default.removeItem('hasSeenOnboarding');\n        setIsAuthenticated(false);\n        setUserEmail(null);\n        setIsAdmin(false);\n        setAuthToken(null);\n      } catch (error) {\n        console.error('Error during logout:', error);\n        throw error;\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        isAuthenticated,\n        userEmail,\n        isAdmin,\n        authToken,\n        login,\n        logout,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"IgUs7AuY0900NiwKZx/aryAMBuU=\", false, function () {\n    return [_LanguageContext.useLanguage];\n  });\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":137,"map":[[15,2,18,0,"Object"],[15,8,18,0],[15,9,18,0,"defineProperty"],[15,23,18,0],[15,24,18,0,"exports"],[15,31,18,0],[16,4,18,0,"enumerable"],[16,14,18,0],[17,4,18,0,"get"],[17,7,18,0],[17,18,18,0,"get"],[17,19,18,0],[18,6,18,0],[18,13,18,0,"AuthProvider"],[18,25,18,0],[19,4,18,0],[20,2,18,0],[21,2,98,0,"Object"],[21,8,98,0],[21,9,98,0,"defineProperty"],[21,23,98,0],[21,24,98,0,"exports"],[21,31,98,0],[22,4,98,0,"enumerable"],[22,14,98,0],[23,4,98,0,"get"],[23,7,98,0],[23,18,98,0,"get"],[23,19,98,0],[24,6,98,0],[24,13,98,0,"useAuth"],[24,20,98,0],[25,4,98,0],[26,2,98,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,2,0],[28,45,2,0,"require"],[28,52,2,0],[28,53,2,0,"_dependencyMap"],[28,67,2,0],[29,2,2,0],[29,6,2,0,"AsyncStorage"],[29,18,2,0],[29,21,2,0,"_interopDefault"],[29,36,2,0],[29,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,2,0],[30,2,3,0],[30,6,3,0,"_utilsPushNotifications"],[30,29,3,0],[30,32,3,0,"require"],[30,39,3,0],[30,40,3,0,"_dependencyMap"],[30,54,3,0],[31,2,4,0],[31,6,4,0,"_LanguageContext"],[31,22,4,0],[31,25,4,0,"require"],[31,32,4,0],[31,33,4,0,"_dependencyMap"],[31,47,4,0],[32,2,4,48],[32,6,4,48,"_reactJsxDevRuntime"],[32,25,4,48],[32,28,4,48,"require"],[32,35,4,48],[32,36,4,48,"_dependencyMap"],[32,50,4,48],[33,2,16,0],[33,8,16,6,"AuthContext"],[33,19,16,17],[33,35,16,20],[33,39,16,20,"createContext"],[33,45,16,33],[33,46,16,33,"createContext"],[33,59,16,33],[33,61,16,63,"undefined"],[33,70,16,72],[33,71,16,73],[34,2,18,7],[34,8,18,13,"AuthProvider"],[34,20,18,25],[34,23,18,28,"AuthProvider"],[34,24,18,29],[35,4,18,31,"children"],[36,2,18,65],[36,3,18,66],[36,8,18,71],[37,4,18,71,"_s"],[37,6,18,71],[38,4,19,2],[38,10,19,8],[38,11,19,9,"isAuthenticated"],[38,26,19,24],[38,28,19,26,"setIsAuthenticated"],[38,46,19,44],[38,47,19,45],[38,50,19,48],[38,54,19,48,"useState"],[38,60,19,56],[38,61,19,56,"useState"],[38,69,19,56],[38,71,19,57],[38,76,19,62],[38,77,19,63],[39,4,20,2],[39,10,20,8],[39,11,20,9,"userEmail"],[39,20,20,18],[39,22,20,20,"setUserEmail"],[39,34,20,32],[39,35,20,33],[39,38,20,36],[39,42,20,36,"useState"],[39,48,20,44],[39,49,20,44,"useState"],[39,57,20,44],[39,59,20,60],[39,63,20,64],[39,64,20,65],[40,4,21,2],[40,10,21,8],[40,11,21,9,"isAdmin"],[40,18,21,16],[40,20,21,18,"setIsAdmin"],[40,30,21,28],[40,31,21,29],[40,34,21,32],[40,38,21,32,"useState"],[40,44,21,40],[40,45,21,40,"useState"],[40,53,21,40],[40,55,21,41],[40,60,21,46],[40,61,21,47],[41,4,22,2],[41,10,22,8],[41,11,22,9,"authToken"],[41,20,22,18],[41,22,22,20,"setAuthToken"],[41,34,22,32],[41,35,22,33],[41,38,22,36],[41,42,22,36,"useState"],[41,48,22,44],[41,49,22,44,"useState"],[41,57,22,44],[41,59,22,60],[41,63,22,64],[41,64,22,65],[42,4,23,2],[42,10,23,8],[42,11,23,9,"loading"],[42,18,23,16],[42,20,23,18,"setLoading"],[42,30,23,28],[42,31,23,29],[42,34,23,32],[42,38,23,32,"useState"],[42,44,23,40],[42,45,23,40,"useState"],[42,53,23,40],[42,55,23,41],[42,59,23,45],[42,60,23,46],[43,4,24,2],[43,10,24,8],[44,6,24,10,"language"],[45,4,24,19],[45,5,24,20],[45,8,24,23],[45,12,24,23,"useLanguage"],[45,28,24,34],[45,29,24,34,"useLanguage"],[45,40,24,34],[45,42,24,35],[45,43,24,36],[46,4,26,2],[46,8,26,2,"useEffect"],[46,14,26,11],[46,15,26,11,"useEffect"],[46,24,26,11],[46,26,26,12],[46,32,26,18],[47,6,27,4,"checkAuthStatus"],[47,21,27,19],[47,22,27,20],[47,23,27,21],[48,4,28,2],[48,5,28,3],[48,7,28,5],[48,9,28,7],[48,10,28,8],[50,4,30,2],[51,4,31,2],[51,8,31,2,"useEffect"],[51,14,31,11],[51,15,31,11,"useEffect"],[51,24,31,11],[51,26,31,12],[51,32,31,18],[52,6,32,4],[52,12,32,10,"listeners"],[52,21,32,19],[52,24,32,22],[52,28,32,22,"setupNotificationListeners"],[52,51,32,48],[52,52,32,48,"setupNotificationListeners"],[52,78,32,48],[52,80,32,49],[52,81,32,50],[53,6,33,4],[53,13,33,11],[53,19,33,17],[54,8,34,6],[54,12,34,6,"removeNotificationListeners"],[54,35,34,33],[54,36,34,33,"removeNotificationListeners"],[54,63,34,33],[54,65,34,34,"listeners"],[54,74,34,43],[54,75,34,44],[55,6,35,4],[55,7,35,5],[56,4,36,2],[56,5,36,3],[56,7,36,5],[56,9,36,7],[56,10,36,8],[57,4,38,2],[57,10,38,8,"checkAuthStatus"],[57,25,38,23],[57,28,38,26],[57,34,38,26,"checkAuthStatus"],[57,35,38,26],[57,40,38,38],[58,6,39,4],[58,10,39,8],[59,8,40,6],[59,14,40,12,"email"],[59,19,40,17],[59,22,40,20],[59,28,40,26,"AsyncStorage"],[59,40,40,38],[59,41,40,38,"default"],[59,48,40,38],[59,49,40,39,"getItem"],[59,56,40,46],[59,57,40,47],[59,68,40,58],[59,69,40,59],[60,8,41,6],[60,14,41,12,"token"],[60,19,41,17],[60,22,41,20],[60,28,41,26,"AsyncStorage"],[60,40,41,38],[60,41,41,38,"default"],[60,48,41,38],[60,49,41,39,"getItem"],[60,56,41,46],[60,57,41,47],[60,68,41,58],[60,69,41,59],[61,8,42,6],[61,12,42,10,"email"],[61,17,42,15],[61,19,42,17],[62,10,43,8,"setIsAuthenticated"],[62,28,43,26],[62,29,43,27],[62,33,43,31],[62,34,43,32],[63,10,44,8,"setUserEmail"],[63,22,44,20],[63,23,44,21,"email"],[63,28,44,26],[63,29,44,27],[64,10,45,8,"setIsAdmin"],[64,20,45,18],[64,21,45,19,"email"],[64,26,45,24],[64,31,45,29],[64,52,45,50],[64,53,45,51],[65,10,46,8,"setAuthToken"],[65,22,46,20],[65,23,46,21,"token"],[65,28,46,26],[65,29,46,27],[66,8,47,6],[67,6,48,4],[67,7,48,5],[67,8,48,6],[67,15,48,13,"error"],[67,20,48,18],[67,22,48,20],[68,8,49,6,"console"],[68,15,49,13],[68,16,49,14,"error"],[68,21,49,19],[68,22,49,20],[68,51,49,49],[68,53,49,51,"error"],[68,58,49,56],[68,59,49,57],[69,6,50,4],[69,7,50,5],[69,16,50,14],[70,8,51,6,"setLoading"],[70,18,51,16],[70,19,51,17],[70,24,51,22],[70,25,51,23],[71,6,52,4],[72,4,53,2],[72,5,53,3],[73,4,55,2],[73,10,55,8,"login"],[73,15,55,13],[73,18,55,16],[73,24,55,16,"login"],[73,25,55,23,"email"],[73,30,55,36],[73,32,55,38,"token"],[73,37,55,52],[73,42,55,57],[74,6,56,4],[74,10,56,8],[75,8,57,6],[75,14,57,12,"AsyncStorage"],[75,26,57,24],[75,27,57,24,"default"],[75,34,57,24],[75,35,57,25,"setItem"],[75,42,57,32],[75,43,57,33],[75,54,57,44],[75,56,57,46,"email"],[75,61,57,51],[75,62,57,52],[76,8,58,6],[76,12,58,10,"token"],[76,17,58,15],[76,19,58,17],[77,10,59,8],[77,16,59,14,"AsyncStorage"],[77,28,59,26],[77,29,59,26,"default"],[77,36,59,26],[77,37,59,27,"setItem"],[77,44,59,34],[77,45,59,35],[77,56,59,46],[77,58,59,48,"token"],[77,63,59,53],[77,64,59,54],[78,8,60,6],[79,8,61,6,"setIsAuthenticated"],[79,26,61,24],[79,27,61,25],[79,31,61,29],[79,32,61,30],[80,8,62,6,"setUserEmail"],[80,20,62,18],[80,21,62,19,"email"],[80,26,62,24],[80,27,62,25],[81,8,63,6,"setIsAdmin"],[81,18,63,16],[81,19,63,17,"email"],[81,24,63,22],[81,29,63,27],[81,50,63,48],[81,51,63,49],[82,8,64,6,"setAuthToken"],[82,20,64,18],[82,21,64,19,"token"],[82,26,64,24],[82,30,64,28],[82,34,64,32],[82,35,64,33],[84,8,66,6],[85,8,67,6],[85,12,67,6,"registerForPushNotificationsAsync"],[85,35,67,39],[85,36,67,39,"registerForPushNotificationsAsync"],[85,69,67,39],[85,71,67,40,"email"],[85,76,67,45],[85,78,67,47,"language"],[85,86,67,55],[85,87,67,56],[85,88,67,57,"catch"],[85,93,67,62],[85,94,67,63,"err"],[85,97,67,66],[85,101,68,8,"console"],[85,108,68,15],[85,109,68,16,"error"],[85,114,68,21],[85,115,68,22],[85,155,68,62],[85,157,68,64,"err"],[85,160,68,67],[85,161,69,6],[85,162,69,7],[86,6,70,4],[86,7,70,5],[86,8,70,6],[86,15,70,13,"error"],[86,20,70,18],[86,22,70,20],[87,8,71,6,"console"],[87,15,71,13],[87,16,71,14,"error"],[87,21,71,19],[87,22,71,20],[87,43,71,41],[87,45,71,43,"error"],[87,50,71,48],[87,51,71,49],[88,8,72,6],[88,14,72,12,"error"],[88,19,72,17],[89,6,73,4],[90,4,74,2],[90,5,74,3],[91,4,76,2],[91,10,76,8,"logout"],[91,16,76,14],[91,19,76,17],[91,25,76,17,"logout"],[91,26,76,17],[91,31,76,29],[92,6,77,4],[92,10,77,8],[93,8,78,6],[93,14,78,12,"AsyncStorage"],[93,26,78,24],[93,27,78,24,"default"],[93,34,78,24],[93,35,78,25,"removeItem"],[93,45,78,35],[93,46,78,36],[93,57,78,47],[93,58,78,48],[94,8,79,6],[94,14,79,12,"AsyncStorage"],[94,26,79,24],[94,27,79,24,"default"],[94,34,79,24],[94,35,79,25,"removeItem"],[94,45,79,35],[94,46,79,36],[94,57,79,47],[94,58,79,48],[95,8,80,6],[95,14,80,12,"AsyncStorage"],[95,26,80,24],[95,27,80,24,"default"],[95,34,80,24],[95,35,80,25,"removeItem"],[95,45,80,35],[95,46,80,36],[95,65,80,55],[95,66,80,56],[96,8,81,6,"setIsAuthenticated"],[96,26,81,24],[96,27,81,25],[96,32,81,30],[96,33,81,31],[97,8,82,6,"setUserEmail"],[97,20,82,18],[97,21,82,19],[97,25,82,23],[97,26,82,24],[98,8,83,6,"setIsAdmin"],[98,18,83,16],[98,19,83,17],[98,24,83,22],[98,25,83,23],[99,8,84,6,"setAuthToken"],[99,20,84,18],[99,21,84,19],[99,25,84,23],[99,26,84,24],[100,6,85,4],[100,7,85,5],[100,8,85,6],[100,15,85,13,"error"],[100,20,85,18],[100,22,85,20],[101,8,86,6,"console"],[101,15,86,13],[101,16,86,14,"error"],[101,21,86,19],[101,22,86,20],[101,44,86,42],[101,46,86,44,"error"],[101,51,86,49],[101,52,86,50],[102,8,87,6],[102,14,87,12,"error"],[102,19,87,17],[103,6,88,4],[104,4,89,2],[104,5,89,3],[105,4,91,2],[105,24,92,4],[105,28,92,4,"_reactJsxDevRuntime"],[105,47,92,4],[105,48,92,4,"jsxDEV"],[105,54,92,4],[105,56,92,5,"AuthContext"],[105,67,92,16],[105,68,92,17,"Provider"],[105,76,92,25],[106,6,92,26,"value"],[106,11,92,31],[106,13,92,33],[107,8,92,35,"isAuthenticated"],[107,23,92,50],[108,8,92,52,"userEmail"],[108,17,92,61],[109,8,92,63,"isAdmin"],[109,15,92,70],[110,8,92,72,"authToken"],[110,17,92,81],[111,8,92,83,"login"],[111,13,92,88],[112,8,92,90,"logout"],[112,14,92,96],[113,8,92,98,"loading"],[114,6,92,106],[114,7,92,108],[115,6,92,108,"children"],[115,14,92,108],[115,16,93,7,"children"],[116,4,93,15],[117,6,93,15,"fileName"],[117,14,93,15],[117,16,93,15,"_jsxFileName"],[117,28,93,15],[118,6,93,15,"lineNumber"],[118,16,93,15],[119,6,93,15,"columnNumber"],[119,18,93,15],[120,4,93,15],[120,11,94,26],[120,12,94,27],[121,2,96,0],[121,3,96,1],[122,2,96,2,"_s"],[122,4,96,2],[122,5,18,13,"AuthProvider"],[122,17,18,25],[123,4,18,25],[123,12,24,23,"useLanguage"],[123,28,24,34],[123,29,24,34,"useLanguage"],[123,40,24,34],[124,2,24,34],[125,2,24,34,"_c"],[125,4,24,34],[125,7,18,13,"AuthProvider"],[125,19,18,25],[126,2,98,7],[126,8,98,13,"useAuth"],[126,15,98,20],[126,18,98,23,"useAuth"],[126,19,98,23],[126,24,98,29],[127,4,98,29,"_s2"],[127,7,98,29],[128,4,99,2],[128,10,99,8,"context"],[128,17,99,15],[128,20,99,18],[128,24,99,18,"useContext"],[128,30,99,28],[128,31,99,28,"useContext"],[128,41,99,28],[128,43,99,29,"AuthContext"],[128,54,99,40],[128,55,99,41],[129,4,100,2],[129,8,100,6],[129,9,100,7,"context"],[129,16,100,14],[129,18,100,16],[130,6,101,4],[130,12,101,10],[130,16,101,14,"Error"],[130,21,101,19],[130,22,101,20],[130,64,101,62],[130,65,101,63],[131,4,102,2],[132,4,103,2],[132,11,103,9,"context"],[132,18,103,16],[133,2,104,0],[133,3,104,1],[134,2,104,2,"_s2"],[134,5,104,2],[134,6,98,13,"useAuth"],[134,13,98,20],[135,2,98,20],[135,6,98,20,"_c"],[135,8,98,20],[136,2,98,20,"$RefreshReg$"],[136,14,98,20],[136,15,98,20,"_c"],[136,17,98,20],[137,0,98,20],[137,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","<anonymous>","checkAuthStatus","login","registerForPushNotificationsAsync._catch$argument_0","logout","useAuth"],"mappings":"AAA;4BCiB;YCQ;GDE;YCG;WCE;KDE;GDC;0BGE;GHe;gBIE;+DCY;oEDC;GJM;iBME;GNa;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}