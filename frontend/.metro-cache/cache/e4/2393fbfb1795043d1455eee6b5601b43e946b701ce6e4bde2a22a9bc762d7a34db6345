{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/pushNotifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":136,"index":296}}],"key":"pacSeurS2lh+gpQJVOM5Oqathn8=","exportNames":["*"],"imports":1}},{"name":"./LanguageContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":297},"end":{"line":4,"column":48,"index":345}}],"key":"UDwZfzoSc/8fKq1/o42iNVtUjYk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _utilsPushNotifications = require(_dependencyMap[2], \"../utils/pushNotifications\");\n  var _LanguageContext = require(_dependencyMap[3], \"./LanguageContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [isAuthenticated, setIsAuthenticated] = (0, _react.useState)(false);\n    const [userEmail, setUserEmail] = (0, _react.useState)(null);\n    const [isAdmin, setIsAdmin] = (0, _react.useState)(false);\n    const [authToken, setAuthToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const {\n      language\n    } = (0, _LanguageContext.useLanguage)();\n    (0, _react.useEffect)(() => {\n      checkAuthStatus();\n    }, []);\n\n    // Setup notification listeners\n    (0, _react.useEffect)(() => {\n      const listeners = (0, _utilsPushNotifications.setupNotificationListeners)();\n      return () => {\n        (0, _utilsPushNotifications.removeNotificationListeners)(listeners);\n      };\n    }, []);\n    const checkAuthStatus = async () => {\n      try {\n        const email = await AsyncStorage.default.getItem('userEmail');\n        const token = await AsyncStorage.default.getItem('authToken');\n        if (email) {\n          setIsAuthenticated(true);\n          setUserEmail(email);\n          setIsAdmin(email === 'admin@nutrikids.com');\n          setAuthToken(token);\n        }\n      } catch (error) {\n        console.error('Error checking auth status:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, token) => {\n      try {\n        await AsyncStorage.default.setItem('userEmail', email);\n        if (token) {\n          await AsyncStorage.default.setItem('authToken', token);\n        }\n        setIsAuthenticated(true);\n        setUserEmail(email);\n        setIsAdmin(email === 'admin@nutrikids.com');\n        setAuthToken(token || null);\n\n        // Registra per le notifiche push\n        (0, _utilsPushNotifications.registerForPushNotificationsAsync)(email, language).catch(err => console.error('Failed to register push notifications:', err));\n      } catch (error) {\n        console.error('Error during login:', error);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('userEmail');\n        await AsyncStorage.default.removeItem('authToken');\n        await AsyncStorage.default.removeItem('hasSeenOnboarding');\n        setIsAuthenticated(false);\n        setUserEmail(null);\n        setIsAdmin(false);\n        setAuthToken(null);\n      } catch (error) {\n        console.error('Error during logout:', error);\n        throw error;\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        isAuthenticated,\n        userEmail,\n        isAdmin,\n        authToken,\n        login,\n        logout,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":126,"map":[[13,2,18,0,"Object"],[13,8,18,0],[13,9,18,0,"defineProperty"],[13,23,18,0],[13,24,18,0,"exports"],[13,31,18,0],[14,4,18,0,"enumerable"],[14,14,18,0],[15,4,18,0,"get"],[15,7,18,0],[15,18,18,0,"get"],[15,19,18,0],[16,6,18,0],[16,13,18,0,"AuthProvider"],[16,25,18,0],[17,4,18,0],[18,2,18,0],[19,2,98,0,"Object"],[19,8,98,0],[19,9,98,0,"defineProperty"],[19,23,98,0],[19,24,98,0,"exports"],[19,31,98,0],[20,4,98,0,"enumerable"],[20,14,98,0],[21,4,98,0,"get"],[21,7,98,0],[21,18,98,0,"get"],[21,19,98,0],[22,6,98,0],[22,13,98,0,"useAuth"],[22,20,98,0],[23,4,98,0],[24,2,98,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_utilsPushNotifications"],[28,29,3,0],[28,32,3,0,"require"],[28,39,3,0],[28,40,3,0,"_dependencyMap"],[28,54,3,0],[29,2,4,0],[29,6,4,0,"_LanguageContext"],[29,22,4,0],[29,25,4,0,"require"],[29,32,4,0],[29,33,4,0,"_dependencyMap"],[29,47,4,0],[30,2,4,48],[30,6,4,48,"_reactJsxDevRuntime"],[30,25,4,48],[30,28,4,48,"require"],[30,35,4,48],[30,36,4,48,"_dependencyMap"],[30,50,4,48],[31,2,16,0],[31,8,16,6,"AuthContext"],[31,19,16,17],[31,35,16,20],[31,39,16,20,"createContext"],[31,45,16,33],[31,46,16,33,"createContext"],[31,59,16,33],[31,61,16,63,"undefined"],[31,70,16,72],[31,71,16,73],[32,2,18,7],[32,8,18,13,"AuthProvider"],[32,20,18,25],[32,23,18,28,"AuthProvider"],[32,24,18,29],[33,4,18,31,"children"],[34,2,18,65],[34,3,18,66],[34,8,18,71],[35,4,19,2],[35,10,19,8],[35,11,19,9,"isAuthenticated"],[35,26,19,24],[35,28,19,26,"setIsAuthenticated"],[35,46,19,44],[35,47,19,45],[35,50,19,48],[35,54,19,48,"useState"],[35,60,19,56],[35,61,19,56,"useState"],[35,69,19,56],[35,71,19,57],[35,76,19,62],[35,77,19,63],[36,4,20,2],[36,10,20,8],[36,11,20,9,"userEmail"],[36,20,20,18],[36,22,20,20,"setUserEmail"],[36,34,20,32],[36,35,20,33],[36,38,20,36],[36,42,20,36,"useState"],[36,48,20,44],[36,49,20,44,"useState"],[36,57,20,44],[36,59,20,60],[36,63,20,64],[36,64,20,65],[37,4,21,2],[37,10,21,8],[37,11,21,9,"isAdmin"],[37,18,21,16],[37,20,21,18,"setIsAdmin"],[37,30,21,28],[37,31,21,29],[37,34,21,32],[37,38,21,32,"useState"],[37,44,21,40],[37,45,21,40,"useState"],[37,53,21,40],[37,55,21,41],[37,60,21,46],[37,61,21,47],[38,4,22,2],[38,10,22,8],[38,11,22,9,"authToken"],[38,20,22,18],[38,22,22,20,"setAuthToken"],[38,34,22,32],[38,35,22,33],[38,38,22,36],[38,42,22,36,"useState"],[38,48,22,44],[38,49,22,44,"useState"],[38,57,22,44],[38,59,22,60],[38,63,22,64],[38,64,22,65],[39,4,23,2],[39,10,23,8],[39,11,23,9,"loading"],[39,18,23,16],[39,20,23,18,"setLoading"],[39,30,23,28],[39,31,23,29],[39,34,23,32],[39,38,23,32,"useState"],[39,44,23,40],[39,45,23,40,"useState"],[39,53,23,40],[39,55,23,41],[39,59,23,45],[39,60,23,46],[40,4,24,2],[40,10,24,8],[41,6,24,10,"language"],[42,4,24,19],[42,5,24,20],[42,8,24,23],[42,12,24,23,"useLanguage"],[42,28,24,34],[42,29,24,34,"useLanguage"],[42,40,24,34],[42,42,24,35],[42,43,24,36],[43,4,26,2],[43,8,26,2,"useEffect"],[43,14,26,11],[43,15,26,11,"useEffect"],[43,24,26,11],[43,26,26,12],[43,32,26,18],[44,6,27,4,"checkAuthStatus"],[44,21,27,19],[44,22,27,20],[44,23,27,21],[45,4,28,2],[45,5,28,3],[45,7,28,5],[45,9,28,7],[45,10,28,8],[47,4,30,2],[48,4,31,2],[48,8,31,2,"useEffect"],[48,14,31,11],[48,15,31,11,"useEffect"],[48,24,31,11],[48,26,31,12],[48,32,31,18],[49,6,32,4],[49,12,32,10,"listeners"],[49,21,32,19],[49,24,32,22],[49,28,32,22,"setupNotificationListeners"],[49,51,32,48],[49,52,32,48,"setupNotificationListeners"],[49,78,32,48],[49,80,32,49],[49,81,32,50],[50,6,33,4],[50,13,33,11],[50,19,33,17],[51,8,34,6],[51,12,34,6,"removeNotificationListeners"],[51,35,34,33],[51,36,34,33,"removeNotificationListeners"],[51,63,34,33],[51,65,34,34,"listeners"],[51,74,34,43],[51,75,34,44],[52,6,35,4],[52,7,35,5],[53,4,36,2],[53,5,36,3],[53,7,36,5],[53,9,36,7],[53,10,36,8],[54,4,38,2],[54,10,38,8,"checkAuthStatus"],[54,25,38,23],[54,28,38,26],[54,34,38,26,"checkAuthStatus"],[54,35,38,26],[54,40,38,38],[55,6,39,4],[55,10,39,8],[56,8,40,6],[56,14,40,12,"email"],[56,19,40,17],[56,22,40,20],[56,28,40,26,"AsyncStorage"],[56,40,40,38],[56,41,40,38,"default"],[56,48,40,38],[56,49,40,39,"getItem"],[56,56,40,46],[56,57,40,47],[56,68,40,58],[56,69,40,59],[57,8,41,6],[57,14,41,12,"token"],[57,19,41,17],[57,22,41,20],[57,28,41,26,"AsyncStorage"],[57,40,41,38],[57,41,41,38,"default"],[57,48,41,38],[57,49,41,39,"getItem"],[57,56,41,46],[57,57,41,47],[57,68,41,58],[57,69,41,59],[58,8,42,6],[58,12,42,10,"email"],[58,17,42,15],[58,19,42,17],[59,10,43,8,"setIsAuthenticated"],[59,28,43,26],[59,29,43,27],[59,33,43,31],[59,34,43,32],[60,10,44,8,"setUserEmail"],[60,22,44,20],[60,23,44,21,"email"],[60,28,44,26],[60,29,44,27],[61,10,45,8,"setIsAdmin"],[61,20,45,18],[61,21,45,19,"email"],[61,26,45,24],[61,31,45,29],[61,52,45,50],[61,53,45,51],[62,10,46,8,"setAuthToken"],[62,22,46,20],[62,23,46,21,"token"],[62,28,46,26],[62,29,46,27],[63,8,47,6],[64,6,48,4],[64,7,48,5],[64,8,48,6],[64,15,48,13,"error"],[64,20,48,18],[64,22,48,20],[65,8,49,6,"console"],[65,15,49,13],[65,16,49,14,"error"],[65,21,49,19],[65,22,49,20],[65,51,49,49],[65,53,49,51,"error"],[65,58,49,56],[65,59,49,57],[66,6,50,4],[66,7,50,5],[66,16,50,14],[67,8,51,6,"setLoading"],[67,18,51,16],[67,19,51,17],[67,24,51,22],[67,25,51,23],[68,6,52,4],[69,4,53,2],[69,5,53,3],[70,4,55,2],[70,10,55,8,"login"],[70,15,55,13],[70,18,55,16],[70,24,55,16,"login"],[70,25,55,23,"email"],[70,30,55,36],[70,32,55,38,"token"],[70,37,55,52],[70,42,55,57],[71,6,56,4],[71,10,56,8],[72,8,57,6],[72,14,57,12,"AsyncStorage"],[72,26,57,24],[72,27,57,24,"default"],[72,34,57,24],[72,35,57,25,"setItem"],[72,42,57,32],[72,43,57,33],[72,54,57,44],[72,56,57,46,"email"],[72,61,57,51],[72,62,57,52],[73,8,58,6],[73,12,58,10,"token"],[73,17,58,15],[73,19,58,17],[74,10,59,8],[74,16,59,14,"AsyncStorage"],[74,28,59,26],[74,29,59,26,"default"],[74,36,59,26],[74,37,59,27,"setItem"],[74,44,59,34],[74,45,59,35],[74,56,59,46],[74,58,59,48,"token"],[74,63,59,53],[74,64,59,54],[75,8,60,6],[76,8,61,6,"setIsAuthenticated"],[76,26,61,24],[76,27,61,25],[76,31,61,29],[76,32,61,30],[77,8,62,6,"setUserEmail"],[77,20,62,18],[77,21,62,19,"email"],[77,26,62,24],[77,27,62,25],[78,8,63,6,"setIsAdmin"],[78,18,63,16],[78,19,63,17,"email"],[78,24,63,22],[78,29,63,27],[78,50,63,48],[78,51,63,49],[79,8,64,6,"setAuthToken"],[79,20,64,18],[79,21,64,19,"token"],[79,26,64,24],[79,30,64,28],[79,34,64,32],[79,35,64,33],[81,8,66,6],[82,8,67,6],[82,12,67,6,"registerForPushNotificationsAsync"],[82,35,67,39],[82,36,67,39,"registerForPushNotificationsAsync"],[82,69,67,39],[82,71,67,40,"email"],[82,76,67,45],[82,78,67,47,"language"],[82,86,67,55],[82,87,67,56],[82,88,67,57,"catch"],[82,93,67,62],[82,94,67,63,"err"],[82,97,67,66],[82,101,68,8,"console"],[82,108,68,15],[82,109,68,16,"error"],[82,114,68,21],[82,115,68,22],[82,155,68,62],[82,157,68,64,"err"],[82,160,68,67],[82,161,69,6],[82,162,69,7],[83,6,70,4],[83,7,70,5],[83,8,70,6],[83,15,70,13,"error"],[83,20,70,18],[83,22,70,20],[84,8,71,6,"console"],[84,15,71,13],[84,16,71,14,"error"],[84,21,71,19],[84,22,71,20],[84,43,71,41],[84,45,71,43,"error"],[84,50,71,48],[84,51,71,49],[85,8,72,6],[85,14,72,12,"error"],[85,19,72,17],[86,6,73,4],[87,4,74,2],[87,5,74,3],[88,4,76,2],[88,10,76,8,"logout"],[88,16,76,14],[88,19,76,17],[88,25,76,17,"logout"],[88,26,76,17],[88,31,76,29],[89,6,77,4],[89,10,77,8],[90,8,78,6],[90,14,78,12,"AsyncStorage"],[90,26,78,24],[90,27,78,24,"default"],[90,34,78,24],[90,35,78,25,"removeItem"],[90,45,78,35],[90,46,78,36],[90,57,78,47],[90,58,78,48],[91,8,79,6],[91,14,79,12,"AsyncStorage"],[91,26,79,24],[91,27,79,24,"default"],[91,34,79,24],[91,35,79,25,"removeItem"],[91,45,79,35],[91,46,79,36],[91,57,79,47],[91,58,79,48],[92,8,80,6],[92,14,80,12,"AsyncStorage"],[92,26,80,24],[92,27,80,24,"default"],[92,34,80,24],[92,35,80,25,"removeItem"],[92,45,80,35],[92,46,80,36],[92,65,80,55],[92,66,80,56],[93,8,81,6,"setIsAuthenticated"],[93,26,81,24],[93,27,81,25],[93,32,81,30],[93,33,81,31],[94,8,82,6,"setUserEmail"],[94,20,82,18],[94,21,82,19],[94,25,82,23],[94,26,82,24],[95,8,83,6,"setIsAdmin"],[95,18,83,16],[95,19,83,17],[95,24,83,22],[95,25,83,23],[96,8,84,6,"setAuthToken"],[96,20,84,18],[96,21,84,19],[96,25,84,23],[96,26,84,24],[97,6,85,4],[97,7,85,5],[97,8,85,6],[97,15,85,13,"error"],[97,20,85,18],[97,22,85,20],[98,8,86,6,"console"],[98,15,86,13],[98,16,86,14,"error"],[98,21,86,19],[98,22,86,20],[98,44,86,42],[98,46,86,44,"error"],[98,51,86,49],[98,52,86,50],[99,8,87,6],[99,14,87,12,"error"],[99,19,87,17],[100,6,88,4],[101,4,89,2],[101,5,89,3],[102,4,91,2],[102,24,92,4],[102,28,92,4,"_reactJsxDevRuntime"],[102,47,92,4],[102,48,92,4,"jsxDEV"],[102,54,92,4],[102,56,92,5,"AuthContext"],[102,67,92,16],[102,68,92,17,"Provider"],[102,76,92,25],[103,6,92,26,"value"],[103,11,92,31],[103,13,92,33],[104,8,92,35,"isAuthenticated"],[104,23,92,50],[105,8,92,52,"userEmail"],[105,17,92,61],[106,8,92,63,"isAdmin"],[106,15,92,70],[107,8,92,72,"authToken"],[107,17,92,81],[108,8,92,83,"login"],[108,13,92,88],[109,8,92,90,"logout"],[109,14,92,96],[110,8,92,98,"loading"],[111,6,92,106],[111,7,92,108],[112,6,92,108,"children"],[112,14,92,108],[112,16,93,7,"children"],[113,4,93,15],[114,6,93,15,"fileName"],[114,14,93,15],[114,16,93,15,"_jsxFileName"],[114,28,93,15],[115,6,93,15,"lineNumber"],[115,16,93,15],[116,6,93,15,"columnNumber"],[116,18,93,15],[117,4,93,15],[117,11,94,26],[117,12,94,27],[118,2,96,0],[118,3,96,1],[119,2,98,7],[119,8,98,13,"useAuth"],[119,15,98,20],[119,18,98,23,"useAuth"],[119,19,98,23],[119,24,98,29],[120,4,99,2],[120,10,99,8,"context"],[120,17,99,15],[120,20,99,18],[120,24,99,18,"useContext"],[120,30,99,28],[120,31,99,28,"useContext"],[120,41,99,28],[120,43,99,29,"AuthContext"],[120,54,99,40],[120,55,99,41],[121,4,100,2],[121,8,100,6],[121,9,100,7,"context"],[121,16,100,14],[121,18,100,16],[122,6,101,4],[122,12,101,10],[122,16,101,14,"Error"],[122,21,101,19],[122,22,101,20],[122,64,101,62],[122,65,101,63],[123,4,102,2],[124,4,103,2],[124,11,103,9,"context"],[124,18,103,16],[125,2,104,0],[125,3,104,1],[126,0,104,2],[126,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","<anonymous>","checkAuthStatus","login","registerForPushNotificationsAsync._catch$argument_0","logout","useAuth"],"mappings":"AAA;4BCiB;YCQ;GDE;YCG;WCE;KDE;GDC;0BGE;GHe;gBIE;+DCY;oEDC;GJM;iBME;GNa;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}