{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/pushNotifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":136,"index":296}}],"key":"pacSeurS2lh+gpQJVOM5Oqathn8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _utilsPushNotifications = require(_dependencyMap[2], \"../utils/pushNotifications\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [isAuthenticated, setIsAuthenticated] = (0, _react.useState)(false);\n    const [userEmail, setUserEmail] = (0, _react.useState)(null);\n    const [isAdmin, setIsAdmin] = (0, _react.useState)(false);\n    const [authToken, setAuthToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuthStatus();\n    }, []);\n\n    // Setup notification listeners\n    (0, _react.useEffect)(() => {\n      const listeners = (0, _utilsPushNotifications.setupNotificationListeners)();\n      return () => {\n        (0, _utilsPushNotifications.removeNotificationListeners)(listeners);\n      };\n    }, []);\n    const checkAuthStatus = async () => {\n      try {\n        const email = await AsyncStorage.default.getItem('userEmail');\n        const token = await AsyncStorage.default.getItem('authToken');\n        if (email) {\n          setIsAuthenticated(true);\n          setUserEmail(email);\n          setIsAdmin(email === 'admin@nutrikids.com');\n          setAuthToken(token);\n        }\n      } catch (error) {\n        console.error('Error checking auth status:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, token) => {\n      try {\n        await AsyncStorage.default.setItem('userEmail', email);\n        if (token) {\n          await AsyncStorage.default.setItem('authToken', token);\n        }\n        setIsAuthenticated(true);\n        setUserEmail(email);\n        setIsAdmin(email === 'admin@nutrikids.com');\n        setAuthToken(token || null);\n\n        // Registra per le notifiche push - ottieni la lingua da AsyncStorage\n        const savedLanguage = (await AsyncStorage.default.getItem('language')) || 'it';\n        (0, _utilsPushNotifications.registerForPushNotificationsAsync)(email, savedLanguage).catch(err => console.error('Failed to register push notifications:', err));\n      } catch (error) {\n        console.error('Error during login:', error);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('userEmail');\n        await AsyncStorage.default.removeItem('authToken');\n        await AsyncStorage.default.removeItem('hasSeenOnboarding');\n        setIsAuthenticated(false);\n        setUserEmail(null);\n        setIsAdmin(false);\n        setAuthToken(null);\n      } catch (error) {\n        console.error('Error during logout:', error);\n        throw error;\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        isAuthenticated,\n        userEmail,\n        isAdmin,\n        authToken,\n        login,\n        logout,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":123,"map":[[13,2,17,0,"Object"],[13,8,17,0],[13,9,17,0,"defineProperty"],[13,23,17,0],[13,24,17,0,"exports"],[13,31,17,0],[14,4,17,0,"enumerable"],[14,14,17,0],[15,4,17,0,"get"],[15,7,17,0],[15,18,17,0,"get"],[15,19,17,0],[16,6,17,0],[16,13,17,0,"AuthProvider"],[16,25,17,0],[17,4,17,0],[18,2,17,0],[19,2,97,0,"Object"],[19,8,97,0],[19,9,97,0,"defineProperty"],[19,23,97,0],[19,24,97,0,"exports"],[19,31,97,0],[20,4,97,0,"enumerable"],[20,14,97,0],[21,4,97,0,"get"],[21,7,97,0],[21,18,97,0,"get"],[21,19,97,0],[22,6,97,0],[22,13,97,0,"useAuth"],[22,20,97,0],[23,4,97,0],[24,2,97,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_utilsPushNotifications"],[28,29,3,0],[28,32,3,0,"require"],[28,39,3,0],[28,40,3,0,"_dependencyMap"],[28,54,3,0],[29,2,3,136],[29,6,3,136,"_reactJsxDevRuntime"],[29,25,3,136],[29,28,3,136,"require"],[29,35,3,136],[29,36,3,136,"_dependencyMap"],[29,50,3,136],[30,2,15,0],[30,8,15,6,"AuthContext"],[30,19,15,17],[30,35,15,20],[30,39,15,20,"createContext"],[30,45,15,33],[30,46,15,33,"createContext"],[30,59,15,33],[30,61,15,63,"undefined"],[30,70,15,72],[30,71,15,73],[31,2,17,7],[31,8,17,13,"AuthProvider"],[31,20,17,25],[31,23,17,28,"AuthProvider"],[31,24,17,29],[32,4,17,31,"children"],[33,2,17,65],[33,3,17,66],[33,8,17,71],[34,4,18,2],[34,10,18,8],[34,11,18,9,"isAuthenticated"],[34,26,18,24],[34,28,18,26,"setIsAuthenticated"],[34,46,18,44],[34,47,18,45],[34,50,18,48],[34,54,18,48,"useState"],[34,60,18,56],[34,61,18,56,"useState"],[34,69,18,56],[34,71,18,57],[34,76,18,62],[34,77,18,63],[35,4,19,2],[35,10,19,8],[35,11,19,9,"userEmail"],[35,20,19,18],[35,22,19,20,"setUserEmail"],[35,34,19,32],[35,35,19,33],[35,38,19,36],[35,42,19,36,"useState"],[35,48,19,44],[35,49,19,44,"useState"],[35,57,19,44],[35,59,19,60],[35,63,19,64],[35,64,19,65],[36,4,20,2],[36,10,20,8],[36,11,20,9,"isAdmin"],[36,18,20,16],[36,20,20,18,"setIsAdmin"],[36,30,20,28],[36,31,20,29],[36,34,20,32],[36,38,20,32,"useState"],[36,44,20,40],[36,45,20,40,"useState"],[36,53,20,40],[36,55,20,41],[36,60,20,46],[36,61,20,47],[37,4,21,2],[37,10,21,8],[37,11,21,9,"authToken"],[37,20,21,18],[37,22,21,20,"setAuthToken"],[37,34,21,32],[37,35,21,33],[37,38,21,36],[37,42,21,36,"useState"],[37,48,21,44],[37,49,21,44,"useState"],[37,57,21,44],[37,59,21,60],[37,63,21,64],[37,64,21,65],[38,4,22,2],[38,10,22,8],[38,11,22,9,"loading"],[38,18,22,16],[38,20,22,18,"setLoading"],[38,30,22,28],[38,31,22,29],[38,34,22,32],[38,38,22,32,"useState"],[38,44,22,40],[38,45,22,40,"useState"],[38,53,22,40],[38,55,22,41],[38,59,22,45],[38,60,22,46],[39,4,24,2],[39,8,24,2,"useEffect"],[39,14,24,11],[39,15,24,11,"useEffect"],[39,24,24,11],[39,26,24,12],[39,32,24,18],[40,6,25,4,"checkAuthStatus"],[40,21,25,19],[40,22,25,20],[40,23,25,21],[41,4,26,2],[41,5,26,3],[41,7,26,5],[41,9,26,7],[41,10,26,8],[43,4,28,2],[44,4,29,2],[44,8,29,2,"useEffect"],[44,14,29,11],[44,15,29,11,"useEffect"],[44,24,29,11],[44,26,29,12],[44,32,29,18],[45,6,30,4],[45,12,30,10,"listeners"],[45,21,30,19],[45,24,30,22],[45,28,30,22,"setupNotificationListeners"],[45,51,30,48],[45,52,30,48,"setupNotificationListeners"],[45,78,30,48],[45,80,30,49],[45,81,30,50],[46,6,31,4],[46,13,31,11],[46,19,31,17],[47,8,32,6],[47,12,32,6,"removeNotificationListeners"],[47,35,32,33],[47,36,32,33,"removeNotificationListeners"],[47,63,32,33],[47,65,32,34,"listeners"],[47,74,32,43],[47,75,32,44],[48,6,33,4],[48,7,33,5],[49,4,34,2],[49,5,34,3],[49,7,34,5],[49,9,34,7],[49,10,34,8],[50,4,36,2],[50,10,36,8,"checkAuthStatus"],[50,25,36,23],[50,28,36,26],[50,34,36,26,"checkAuthStatus"],[50,35,36,26],[50,40,36,38],[51,6,37,4],[51,10,37,8],[52,8,38,6],[52,14,38,12,"email"],[52,19,38,17],[52,22,38,20],[52,28,38,26,"AsyncStorage"],[52,40,38,38],[52,41,38,38,"default"],[52,48,38,38],[52,49,38,39,"getItem"],[52,56,38,46],[52,57,38,47],[52,68,38,58],[52,69,38,59],[53,8,39,6],[53,14,39,12,"token"],[53,19,39,17],[53,22,39,20],[53,28,39,26,"AsyncStorage"],[53,40,39,38],[53,41,39,38,"default"],[53,48,39,38],[53,49,39,39,"getItem"],[53,56,39,46],[53,57,39,47],[53,68,39,58],[53,69,39,59],[54,8,40,6],[54,12,40,10,"email"],[54,17,40,15],[54,19,40,17],[55,10,41,8,"setIsAuthenticated"],[55,28,41,26],[55,29,41,27],[55,33,41,31],[55,34,41,32],[56,10,42,8,"setUserEmail"],[56,22,42,20],[56,23,42,21,"email"],[56,28,42,26],[56,29,42,27],[57,10,43,8,"setIsAdmin"],[57,20,43,18],[57,21,43,19,"email"],[57,26,43,24],[57,31,43,29],[57,52,43,50],[57,53,43,51],[58,10,44,8,"setAuthToken"],[58,22,44,20],[58,23,44,21,"token"],[58,28,44,26],[58,29,44,27],[59,8,45,6],[60,6,46,4],[60,7,46,5],[60,8,46,6],[60,15,46,13,"error"],[60,20,46,18],[60,22,46,20],[61,8,47,6,"console"],[61,15,47,13],[61,16,47,14,"error"],[61,21,47,19],[61,22,47,20],[61,51,47,49],[61,53,47,51,"error"],[61,58,47,56],[61,59,47,57],[62,6,48,4],[62,7,48,5],[62,16,48,14],[63,8,49,6,"setLoading"],[63,18,49,16],[63,19,49,17],[63,24,49,22],[63,25,49,23],[64,6,50,4],[65,4,51,2],[65,5,51,3],[66,4,53,2],[66,10,53,8,"login"],[66,15,53,13],[66,18,53,16],[66,24,53,16,"login"],[66,25,53,23,"email"],[66,30,53,36],[66,32,53,38,"token"],[66,37,53,52],[66,42,53,57],[67,6,54,4],[67,10,54,8],[68,8,55,6],[68,14,55,12,"AsyncStorage"],[68,26,55,24],[68,27,55,24,"default"],[68,34,55,24],[68,35,55,25,"setItem"],[68,42,55,32],[68,43,55,33],[68,54,55,44],[68,56,55,46,"email"],[68,61,55,51],[68,62,55,52],[69,8,56,6],[69,12,56,10,"token"],[69,17,56,15],[69,19,56,17],[70,10,57,8],[70,16,57,14,"AsyncStorage"],[70,28,57,26],[70,29,57,26,"default"],[70,36,57,26],[70,37,57,27,"setItem"],[70,44,57,34],[70,45,57,35],[70,56,57,46],[70,58,57,48,"token"],[70,63,57,53],[70,64,57,54],[71,8,58,6],[72,8,59,6,"setIsAuthenticated"],[72,26,59,24],[72,27,59,25],[72,31,59,29],[72,32,59,30],[73,8,60,6,"setUserEmail"],[73,20,60,18],[73,21,60,19,"email"],[73,26,60,24],[73,27,60,25],[74,8,61,6,"setIsAdmin"],[74,18,61,16],[74,19,61,17,"email"],[74,24,61,22],[74,29,61,27],[74,50,61,48],[74,51,61,49],[75,8,62,6,"setAuthToken"],[75,20,62,18],[75,21,62,19,"token"],[75,26,62,24],[75,30,62,28],[75,34,62,32],[75,35,62,33],[77,8,64,6],[78,8,65,6],[78,14,65,12,"savedLanguage"],[78,27,65,25],[78,30,65,28],[78,37,65,34,"AsyncStorage"],[78,49,65,46],[78,50,65,46,"default"],[78,57,65,46],[78,58,65,47,"getItem"],[78,65,65,54],[78,66,65,55],[78,76,65,65],[78,77,65,66],[78,82,65,70],[78,86,65,74],[79,8,66,6],[79,12,66,6,"registerForPushNotificationsAsync"],[79,35,66,39],[79,36,66,39,"registerForPushNotificationsAsync"],[79,69,66,39],[79,71,66,40,"email"],[79,76,66,45],[79,78,66,47,"savedLanguage"],[79,91,66,60],[79,92,66,61],[79,93,66,62,"catch"],[79,98,66,67],[79,99,66,68,"err"],[79,102,66,71],[79,106,67,8,"console"],[79,113,67,15],[79,114,67,16,"error"],[79,119,67,21],[79,120,67,22],[79,160,67,62],[79,162,67,64,"err"],[79,165,67,67],[79,166,68,6],[79,167,68,7],[80,6,69,4],[80,7,69,5],[80,8,69,6],[80,15,69,13,"error"],[80,20,69,18],[80,22,69,20],[81,8,70,6,"console"],[81,15,70,13],[81,16,70,14,"error"],[81,21,70,19],[81,22,70,20],[81,43,70,41],[81,45,70,43,"error"],[81,50,70,48],[81,51,70,49],[82,8,71,6],[82,14,71,12,"error"],[82,19,71,17],[83,6,72,4],[84,4,73,2],[84,5,73,3],[85,4,75,2],[85,10,75,8,"logout"],[85,16,75,14],[85,19,75,17],[85,25,75,17,"logout"],[85,26,75,17],[85,31,75,29],[86,6,76,4],[86,10,76,8],[87,8,77,6],[87,14,77,12,"AsyncStorage"],[87,26,77,24],[87,27,77,24,"default"],[87,34,77,24],[87,35,77,25,"removeItem"],[87,45,77,35],[87,46,77,36],[87,57,77,47],[87,58,77,48],[88,8,78,6],[88,14,78,12,"AsyncStorage"],[88,26,78,24],[88,27,78,24,"default"],[88,34,78,24],[88,35,78,25,"removeItem"],[88,45,78,35],[88,46,78,36],[88,57,78,47],[88,58,78,48],[89,8,79,6],[89,14,79,12,"AsyncStorage"],[89,26,79,24],[89,27,79,24,"default"],[89,34,79,24],[89,35,79,25,"removeItem"],[89,45,79,35],[89,46,79,36],[89,65,79,55],[89,66,79,56],[90,8,80,6,"setIsAuthenticated"],[90,26,80,24],[90,27,80,25],[90,32,80,30],[90,33,80,31],[91,8,81,6,"setUserEmail"],[91,20,81,18],[91,21,81,19],[91,25,81,23],[91,26,81,24],[92,8,82,6,"setIsAdmin"],[92,18,82,16],[92,19,82,17],[92,24,82,22],[92,25,82,23],[93,8,83,6,"setAuthToken"],[93,20,83,18],[93,21,83,19],[93,25,83,23],[93,26,83,24],[94,6,84,4],[94,7,84,5],[94,8,84,6],[94,15,84,13,"error"],[94,20,84,18],[94,22,84,20],[95,8,85,6,"console"],[95,15,85,13],[95,16,85,14,"error"],[95,21,85,19],[95,22,85,20],[95,44,85,42],[95,46,85,44,"error"],[95,51,85,49],[95,52,85,50],[96,8,86,6],[96,14,86,12,"error"],[96,19,86,17],[97,6,87,4],[98,4,88,2],[98,5,88,3],[99,4,90,2],[99,24,91,4],[99,28,91,4,"_reactJsxDevRuntime"],[99,47,91,4],[99,48,91,4,"jsxDEV"],[99,54,91,4],[99,56,91,5,"AuthContext"],[99,67,91,16],[99,68,91,17,"Provider"],[99,76,91,25],[100,6,91,26,"value"],[100,11,91,31],[100,13,91,33],[101,8,91,35,"isAuthenticated"],[101,23,91,50],[102,8,91,52,"userEmail"],[102,17,91,61],[103,8,91,63,"isAdmin"],[103,15,91,70],[104,8,91,72,"authToken"],[104,17,91,81],[105,8,91,83,"login"],[105,13,91,88],[106,8,91,90,"logout"],[106,14,91,96],[107,8,91,98,"loading"],[108,6,91,106],[108,7,91,108],[109,6,91,108,"children"],[109,14,91,108],[109,16,92,7,"children"],[110,4,92,15],[111,6,92,15,"fileName"],[111,14,92,15],[111,16,92,15,"_jsxFileName"],[111,28,92,15],[112,6,92,15,"lineNumber"],[112,16,92,15],[113,6,92,15,"columnNumber"],[113,18,92,15],[114,4,92,15],[114,11,93,26],[114,12,93,27],[115,2,95,0],[115,3,95,1],[116,2,97,7],[116,8,97,13,"useAuth"],[116,15,97,20],[116,18,97,23,"useAuth"],[116,19,97,23],[116,24,97,29],[117,4,98,2],[117,10,98,8,"context"],[117,17,98,15],[117,20,98,18],[117,24,98,18,"useContext"],[117,30,98,28],[117,31,98,28,"useContext"],[117,41,98,28],[117,43,98,29,"AuthContext"],[117,54,98,40],[117,55,98,41],[118,4,99,2],[118,8,99,6],[118,9,99,7,"context"],[118,16,99,14],[118,18,99,16],[119,6,100,4],[119,12,100,10],[119,16,100,14,"Error"],[119,21,100,19],[119,22,100,20],[119,64,100,62],[119,65,100,63],[120,4,101,2],[121,4,102,2],[121,11,102,9,"context"],[121,18,102,16],[122,2,103,0],[122,3,103,1],[123,0,103,2],[123,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","<anonymous>","checkAuthStatus","login","registerForPushNotificationsAsync._catch$argument_0","logout","useAuth"],"mappings":"AAA;4BCgB;YCO;GDE;YCG;WCE;KDE;GDC;0BGE;GHe;gBIE;oECa;oEDC;GJM;iBME;GNa;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}