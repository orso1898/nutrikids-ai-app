{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/pushNotifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":79,"index":239}}],"key":"pacSeurS2lh+gpQJVOM5Oqathn8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _utilsPushNotifications = require(_dependencyMap[2], \"../utils/pushNotifications\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [isAuthenticated, setIsAuthenticated] = (0, _react.useState)(false);\n    const [userEmail, setUserEmail] = (0, _react.useState)(null);\n    const [isAdmin, setIsAdmin] = (0, _react.useState)(false);\n    const [authToken, setAuthToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuthStatus();\n    }, []);\n    const checkAuthStatus = async () => {\n      try {\n        const email = await AsyncStorage.default.getItem('userEmail');\n        const token = await AsyncStorage.default.getItem('authToken');\n        if (email) {\n          setIsAuthenticated(true);\n          setUserEmail(email);\n          setIsAdmin(email === 'admin@nutrikids.com');\n          setAuthToken(token);\n        }\n      } catch (error) {\n        console.error('Error checking auth status:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, token) => {\n      try {\n        await AsyncStorage.default.setItem('userEmail', email);\n        if (token) {\n          await AsyncStorage.default.setItem('authToken', token);\n        }\n        setIsAuthenticated(true);\n        setUserEmail(email);\n        setIsAdmin(email === 'admin@nutrikids.com');\n        setAuthToken(token || null);\n\n        // Registra per le notifiche push - ottieni la lingua da AsyncStorage\n        const savedLanguage = (await AsyncStorage.default.getItem('language')) || 'it';\n        (0, _utilsPushNotifications.registerForPushNotificationsAsync)(email, savedLanguage).catch(err => console.error('Failed to register push notifications:', err));\n      } catch (error) {\n        console.error('Error during login:', error);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('userEmail');\n        await AsyncStorage.default.removeItem('authToken');\n        await AsyncStorage.default.removeItem('hasSeenOnboarding');\n        setIsAuthenticated(false);\n        setUserEmail(null);\n        setIsAdmin(false);\n        setAuthToken(null);\n      } catch (error) {\n        console.error('Error during logout:', error);\n        throw error;\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        isAuthenticated,\n        userEmail,\n        isAdmin,\n        authToken,\n        login,\n        logout,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":115,"map":[[13,2,17,0,"Object"],[13,8,17,0],[13,9,17,0,"defineProperty"],[13,23,17,0],[13,24,17,0,"exports"],[13,31,17,0],[14,4,17,0,"enumerable"],[14,14,17,0],[15,4,17,0,"get"],[15,7,17,0],[15,18,17,0,"get"],[15,19,17,0],[16,6,17,0],[16,13,17,0,"AuthProvider"],[16,25,17,0],[17,4,17,0],[18,2,17,0],[19,2,89,0,"Object"],[19,8,89,0],[19,9,89,0,"defineProperty"],[19,23,89,0],[19,24,89,0,"exports"],[19,31,89,0],[20,4,89,0,"enumerable"],[20,14,89,0],[21,4,89,0,"get"],[21,7,89,0],[21,18,89,0,"get"],[21,19,89,0],[22,6,89,0],[22,13,89,0,"useAuth"],[22,20,89,0],[23,4,89,0],[24,2,89,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_utilsPushNotifications"],[28,29,3,0],[28,32,3,0,"require"],[28,39,3,0],[28,40,3,0,"_dependencyMap"],[28,54,3,0],[29,2,3,79],[29,6,3,79,"_reactJsxDevRuntime"],[29,25,3,79],[29,28,3,79,"require"],[29,35,3,79],[29,36,3,79,"_dependencyMap"],[29,50,3,79],[30,2,15,0],[30,8,15,6,"AuthContext"],[30,19,15,17],[30,35,15,20],[30,39,15,20,"createContext"],[30,45,15,33],[30,46,15,33,"createContext"],[30,59,15,33],[30,61,15,63,"undefined"],[30,70,15,72],[30,71,15,73],[31,2,17,7],[31,8,17,13,"AuthProvider"],[31,20,17,25],[31,23,17,28,"AuthProvider"],[31,24,17,29],[32,4,17,31,"children"],[33,2,17,65],[33,3,17,66],[33,8,17,71],[34,4,18,2],[34,10,18,8],[34,11,18,9,"isAuthenticated"],[34,26,18,24],[34,28,18,26,"setIsAuthenticated"],[34,46,18,44],[34,47,18,45],[34,50,18,48],[34,54,18,48,"useState"],[34,60,18,56],[34,61,18,56,"useState"],[34,69,18,56],[34,71,18,57],[34,76,18,62],[34,77,18,63],[35,4,19,2],[35,10,19,8],[35,11,19,9,"userEmail"],[35,20,19,18],[35,22,19,20,"setUserEmail"],[35,34,19,32],[35,35,19,33],[35,38,19,36],[35,42,19,36,"useState"],[35,48,19,44],[35,49,19,44,"useState"],[35,57,19,44],[35,59,19,60],[35,63,19,64],[35,64,19,65],[36,4,20,2],[36,10,20,8],[36,11,20,9,"isAdmin"],[36,18,20,16],[36,20,20,18,"setIsAdmin"],[36,30,20,28],[36,31,20,29],[36,34,20,32],[36,38,20,32,"useState"],[36,44,20,40],[36,45,20,40,"useState"],[36,53,20,40],[36,55,20,41],[36,60,20,46],[36,61,20,47],[37,4,21,2],[37,10,21,8],[37,11,21,9,"authToken"],[37,20,21,18],[37,22,21,20,"setAuthToken"],[37,34,21,32],[37,35,21,33],[37,38,21,36],[37,42,21,36,"useState"],[37,48,21,44],[37,49,21,44,"useState"],[37,57,21,44],[37,59,21,60],[37,63,21,64],[37,64,21,65],[38,4,22,2],[38,10,22,8],[38,11,22,9,"loading"],[38,18,22,16],[38,20,22,18,"setLoading"],[38,30,22,28],[38,31,22,29],[38,34,22,32],[38,38,22,32,"useState"],[38,44,22,40],[38,45,22,40,"useState"],[38,53,22,40],[38,55,22,41],[38,59,22,45],[38,60,22,46],[39,4,24,2],[39,8,24,2,"useEffect"],[39,14,24,11],[39,15,24,11,"useEffect"],[39,24,24,11],[39,26,24,12],[39,32,24,18],[40,6,25,4,"checkAuthStatus"],[40,21,25,19],[40,22,25,20],[40,23,25,21],[41,4,26,2],[41,5,26,3],[41,7,26,5],[41,9,26,7],[41,10,26,8],[42,4,28,2],[42,10,28,8,"checkAuthStatus"],[42,25,28,23],[42,28,28,26],[42,34,28,26,"checkAuthStatus"],[42,35,28,26],[42,40,28,38],[43,6,29,4],[43,10,29,8],[44,8,30,6],[44,14,30,12,"email"],[44,19,30,17],[44,22,30,20],[44,28,30,26,"AsyncStorage"],[44,40,30,38],[44,41,30,38,"default"],[44,48,30,38],[44,49,30,39,"getItem"],[44,56,30,46],[44,57,30,47],[44,68,30,58],[44,69,30,59],[45,8,31,6],[45,14,31,12,"token"],[45,19,31,17],[45,22,31,20],[45,28,31,26,"AsyncStorage"],[45,40,31,38],[45,41,31,38,"default"],[45,48,31,38],[45,49,31,39,"getItem"],[45,56,31,46],[45,57,31,47],[45,68,31,58],[45,69,31,59],[46,8,32,6],[46,12,32,10,"email"],[46,17,32,15],[46,19,32,17],[47,10,33,8,"setIsAuthenticated"],[47,28,33,26],[47,29,33,27],[47,33,33,31],[47,34,33,32],[48,10,34,8,"setUserEmail"],[48,22,34,20],[48,23,34,21,"email"],[48,28,34,26],[48,29,34,27],[49,10,35,8,"setIsAdmin"],[49,20,35,18],[49,21,35,19,"email"],[49,26,35,24],[49,31,35,29],[49,52,35,50],[49,53,35,51],[50,10,36,8,"setAuthToken"],[50,22,36,20],[50,23,36,21,"token"],[50,28,36,26],[50,29,36,27],[51,8,37,6],[52,6,38,4],[52,7,38,5],[52,8,38,6],[52,15,38,13,"error"],[52,20,38,18],[52,22,38,20],[53,8,39,6,"console"],[53,15,39,13],[53,16,39,14,"error"],[53,21,39,19],[53,22,39,20],[53,51,39,49],[53,53,39,51,"error"],[53,58,39,56],[53,59,39,57],[54,6,40,4],[54,7,40,5],[54,16,40,14],[55,8,41,6,"setLoading"],[55,18,41,16],[55,19,41,17],[55,24,41,22],[55,25,41,23],[56,6,42,4],[57,4,43,2],[57,5,43,3],[58,4,45,2],[58,10,45,8,"login"],[58,15,45,13],[58,18,45,16],[58,24,45,16,"login"],[58,25,45,23,"email"],[58,30,45,36],[58,32,45,38,"token"],[58,37,45,52],[58,42,45,57],[59,6,46,4],[59,10,46,8],[60,8,47,6],[60,14,47,12,"AsyncStorage"],[60,26,47,24],[60,27,47,24,"default"],[60,34,47,24],[60,35,47,25,"setItem"],[60,42,47,32],[60,43,47,33],[60,54,47,44],[60,56,47,46,"email"],[60,61,47,51],[60,62,47,52],[61,8,48,6],[61,12,48,10,"token"],[61,17,48,15],[61,19,48,17],[62,10,49,8],[62,16,49,14,"AsyncStorage"],[62,28,49,26],[62,29,49,26,"default"],[62,36,49,26],[62,37,49,27,"setItem"],[62,44,49,34],[62,45,49,35],[62,56,49,46],[62,58,49,48,"token"],[62,63,49,53],[62,64,49,54],[63,8,50,6],[64,8,51,6,"setIsAuthenticated"],[64,26,51,24],[64,27,51,25],[64,31,51,29],[64,32,51,30],[65,8,52,6,"setUserEmail"],[65,20,52,18],[65,21,52,19,"email"],[65,26,52,24],[65,27,52,25],[66,8,53,6,"setIsAdmin"],[66,18,53,16],[66,19,53,17,"email"],[66,24,53,22],[66,29,53,27],[66,50,53,48],[66,51,53,49],[67,8,54,6,"setAuthToken"],[67,20,54,18],[67,21,54,19,"token"],[67,26,54,24],[67,30,54,28],[67,34,54,32],[67,35,54,33],[69,8,56,6],[70,8,57,6],[70,14,57,12,"savedLanguage"],[70,27,57,25],[70,30,57,28],[70,37,57,34,"AsyncStorage"],[70,49,57,46],[70,50,57,46,"default"],[70,57,57,46],[70,58,57,47,"getItem"],[70,65,57,54],[70,66,57,55],[70,76,57,65],[70,77,57,66],[70,82,57,70],[70,86,57,74],[71,8,58,6],[71,12,58,6,"registerForPushNotificationsAsync"],[71,35,58,39],[71,36,58,39,"registerForPushNotificationsAsync"],[71,69,58,39],[71,71,58,40,"email"],[71,76,58,45],[71,78,58,47,"savedLanguage"],[71,91,58,60],[71,92,58,61],[71,93,58,62,"catch"],[71,98,58,67],[71,99,58,68,"err"],[71,102,58,71],[71,106,59,8,"console"],[71,113,59,15],[71,114,59,16,"error"],[71,119,59,21],[71,120,59,22],[71,160,59,62],[71,162,59,64,"err"],[71,165,59,67],[71,166,60,6],[71,167,60,7],[72,6,61,4],[72,7,61,5],[72,8,61,6],[72,15,61,13,"error"],[72,20,61,18],[72,22,61,20],[73,8,62,6,"console"],[73,15,62,13],[73,16,62,14,"error"],[73,21,62,19],[73,22,62,20],[73,43,62,41],[73,45,62,43,"error"],[73,50,62,48],[73,51,62,49],[74,8,63,6],[74,14,63,12,"error"],[74,19,63,17],[75,6,64,4],[76,4,65,2],[76,5,65,3],[77,4,67,2],[77,10,67,8,"logout"],[77,16,67,14],[77,19,67,17],[77,25,67,17,"logout"],[77,26,67,17],[77,31,67,29],[78,6,68,4],[78,10,68,8],[79,8,69,6],[79,14,69,12,"AsyncStorage"],[79,26,69,24],[79,27,69,24,"default"],[79,34,69,24],[79,35,69,25,"removeItem"],[79,45,69,35],[79,46,69,36],[79,57,69,47],[79,58,69,48],[80,8,70,6],[80,14,70,12,"AsyncStorage"],[80,26,70,24],[80,27,70,24,"default"],[80,34,70,24],[80,35,70,25,"removeItem"],[80,45,70,35],[80,46,70,36],[80,57,70,47],[80,58,70,48],[81,8,71,6],[81,14,71,12,"AsyncStorage"],[81,26,71,24],[81,27,71,24,"default"],[81,34,71,24],[81,35,71,25,"removeItem"],[81,45,71,35],[81,46,71,36],[81,65,71,55],[81,66,71,56],[82,8,72,6,"setIsAuthenticated"],[82,26,72,24],[82,27,72,25],[82,32,72,30],[82,33,72,31],[83,8,73,6,"setUserEmail"],[83,20,73,18],[83,21,73,19],[83,25,73,23],[83,26,73,24],[84,8,74,6,"setIsAdmin"],[84,18,74,16],[84,19,74,17],[84,24,74,22],[84,25,74,23],[85,8,75,6,"setAuthToken"],[85,20,75,18],[85,21,75,19],[85,25,75,23],[85,26,75,24],[86,6,76,4],[86,7,76,5],[86,8,76,6],[86,15,76,13,"error"],[86,20,76,18],[86,22,76,20],[87,8,77,6,"console"],[87,15,77,13],[87,16,77,14,"error"],[87,21,77,19],[87,22,77,20],[87,44,77,42],[87,46,77,44,"error"],[87,51,77,49],[87,52,77,50],[88,8,78,6],[88,14,78,12,"error"],[88,19,78,17],[89,6,79,4],[90,4,80,2],[90,5,80,3],[91,4,82,2],[91,24,83,4],[91,28,83,4,"_reactJsxDevRuntime"],[91,47,83,4],[91,48,83,4,"jsxDEV"],[91,54,83,4],[91,56,83,5,"AuthContext"],[91,67,83,16],[91,68,83,17,"Provider"],[91,76,83,25],[92,6,83,26,"value"],[92,11,83,31],[92,13,83,33],[93,8,83,35,"isAuthenticated"],[93,23,83,50],[94,8,83,52,"userEmail"],[94,17,83,61],[95,8,83,63,"isAdmin"],[95,15,83,70],[96,8,83,72,"authToken"],[96,17,83,81],[97,8,83,83,"login"],[97,13,83,88],[98,8,83,90,"logout"],[98,14,83,96],[99,8,83,98,"loading"],[100,6,83,106],[100,7,83,108],[101,6,83,108,"children"],[101,14,83,108],[101,16,84,7,"children"],[102,4,84,15],[103,6,84,15,"fileName"],[103,14,84,15],[103,16,84,15,"_jsxFileName"],[103,28,84,15],[104,6,84,15,"lineNumber"],[104,16,84,15],[105,6,84,15,"columnNumber"],[105,18,84,15],[106,4,84,15],[106,11,85,26],[106,12,85,27],[107,2,87,0],[107,3,87,1],[108,2,89,7],[108,8,89,13,"useAuth"],[108,15,89,20],[108,18,89,23,"useAuth"],[108,19,89,23],[108,24,89,29],[109,4,90,2],[109,10,90,8,"context"],[109,17,90,15],[109,20,90,18],[109,24,90,18,"useContext"],[109,30,90,28],[109,31,90,28,"useContext"],[109,41,90,28],[109,43,90,29,"AuthContext"],[109,54,90,40],[109,55,90,41],[110,4,91,2],[110,8,91,6],[110,9,91,7,"context"],[110,16,91,14],[110,18,91,16],[111,6,92,4],[111,12,92,10],[111,16,92,14,"Error"],[111,21,92,19],[111,22,92,20],[111,64,92,62],[111,65,92,63],[112,4,93,2],[113,4,94,2],[113,11,94,9,"context"],[113,18,94,16],[114,2,95,0],[114,3,95,1],[115,0,95,2],[115,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuthStatus","login","registerForPushNotificationsAsync._catch$argument_0","logout","useAuth"],"mappings":"AAA;4BCgB;YCO;GDE;0BEE;GFe;gBGE;oECa;oEDC;GHM;iBKE;GLa;CDO;uBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}