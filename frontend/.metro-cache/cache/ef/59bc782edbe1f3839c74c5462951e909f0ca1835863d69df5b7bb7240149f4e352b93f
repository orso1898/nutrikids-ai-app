{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/pushNotifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":79,"index":239}}],"key":"pacSeurS2lh+gpQJVOM5Oqathn8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _utilsPushNotifications = require(_dependencyMap[2], \"../utils/pushNotifications\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [isAuthenticated, setIsAuthenticated] = (0, _react.useState)(false);\n    const [userEmail, setUserEmail] = (0, _react.useState)(null);\n    const [isAdmin, setIsAdmin] = (0, _react.useState)(false);\n    const [authToken, setAuthToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuthStatus();\n    }, []);\n    const checkAuthStatus = async () => {\n      try {\n        const email = await AsyncStorage.default.getItem('userEmail');\n        const token = await AsyncStorage.default.getItem('authToken');\n        if (email) {\n          setIsAuthenticated(true);\n          setUserEmail(email);\n          setIsAdmin(email === 'admin@nutrikids.com');\n          setAuthToken(token);\n        }\n      } catch (error) {\n        console.error('Error checking auth status:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, token) => {\n      try {\n        await AsyncStorage.default.setItem('userEmail', email);\n        if (token) {\n          await AsyncStorage.default.setItem('authToken', token);\n        }\n        setIsAuthenticated(true);\n        setUserEmail(email);\n        setIsAdmin(email === 'admin@nutrikids.com');\n        setAuthToken(token || null);\n\n        // Registra per le notifiche push - ottieni la lingua da AsyncStorage\n        const savedLanguage = (await AsyncStorage.default.getItem('language')) || 'it';\n        (0, _utilsPushNotifications.registerForPushNotificationsAsync)(email, savedLanguage).catch(err => console.error('Failed to register push notifications:', err));\n      } catch (error) {\n        console.error('Error during login:', error);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('userEmail');\n        await AsyncStorage.default.removeItem('authToken');\n        await AsyncStorage.default.removeItem('hasSeenOnboarding');\n        setIsAuthenticated(false);\n        setUserEmail(null);\n        setIsAdmin(false);\n        setAuthToken(null);\n      } catch (error) {\n        console.error('Error during logout:', error);\n        throw error;\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        isAuthenticated,\n        userEmail,\n        isAdmin,\n        authToken,\n        login,\n        logout,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"GJTxOhqf1p6CieJBvfw45YfdCaE=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":124,"map":[[15,2,17,0,"Object"],[15,8,17,0],[15,9,17,0,"defineProperty"],[15,23,17,0],[15,24,17,0,"exports"],[15,31,17,0],[16,4,17,0,"enumerable"],[16,14,17,0],[17,4,17,0,"get"],[17,7,17,0],[17,18,17,0,"get"],[17,19,17,0],[18,6,17,0],[18,13,17,0,"AuthProvider"],[18,25,17,0],[19,4,17,0],[20,2,17,0],[21,2,89,0,"Object"],[21,8,89,0],[21,9,89,0,"defineProperty"],[21,23,89,0],[21,24,89,0,"exports"],[21,31,89,0],[22,4,89,0,"enumerable"],[22,14,89,0],[23,4,89,0,"get"],[23,7,89,0],[23,18,89,0,"get"],[23,19,89,0],[24,6,89,0],[24,13,89,0,"useAuth"],[24,20,89,0],[25,4,89,0],[26,2,89,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,2,0],[28,45,2,0,"require"],[28,52,2,0],[28,53,2,0,"_dependencyMap"],[28,67,2,0],[29,2,2,0],[29,6,2,0,"AsyncStorage"],[29,18,2,0],[29,21,2,0,"_interopDefault"],[29,36,2,0],[29,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,2,0],[30,2,3,0],[30,6,3,0,"_utilsPushNotifications"],[30,29,3,0],[30,32,3,0,"require"],[30,39,3,0],[30,40,3,0,"_dependencyMap"],[30,54,3,0],[31,2,3,79],[31,6,3,79,"_reactJsxDevRuntime"],[31,25,3,79],[31,28,3,79,"require"],[31,35,3,79],[31,36,3,79,"_dependencyMap"],[31,50,3,79],[32,2,15,0],[32,8,15,6,"AuthContext"],[32,19,15,17],[32,35,15,20],[32,39,15,20,"createContext"],[32,45,15,33],[32,46,15,33,"createContext"],[32,59,15,33],[32,61,15,63,"undefined"],[32,70,15,72],[32,71,15,73],[33,2,17,7],[33,8,17,13,"AuthProvider"],[33,20,17,25],[33,23,17,28,"AuthProvider"],[33,24,17,29],[34,4,17,31,"children"],[35,2,17,65],[35,3,17,66],[35,8,17,71],[36,4,17,71,"_s"],[36,6,17,71],[37,4,18,2],[37,10,18,8],[37,11,18,9,"isAuthenticated"],[37,26,18,24],[37,28,18,26,"setIsAuthenticated"],[37,46,18,44],[37,47,18,45],[37,50,18,48],[37,54,18,48,"useState"],[37,60,18,56],[37,61,18,56,"useState"],[37,69,18,56],[37,71,18,57],[37,76,18,62],[37,77,18,63],[38,4,19,2],[38,10,19,8],[38,11,19,9,"userEmail"],[38,20,19,18],[38,22,19,20,"setUserEmail"],[38,34,19,32],[38,35,19,33],[38,38,19,36],[38,42,19,36,"useState"],[38,48,19,44],[38,49,19,44,"useState"],[38,57,19,44],[38,59,19,60],[38,63,19,64],[38,64,19,65],[39,4,20,2],[39,10,20,8],[39,11,20,9,"isAdmin"],[39,18,20,16],[39,20,20,18,"setIsAdmin"],[39,30,20,28],[39,31,20,29],[39,34,20,32],[39,38,20,32,"useState"],[39,44,20,40],[39,45,20,40,"useState"],[39,53,20,40],[39,55,20,41],[39,60,20,46],[39,61,20,47],[40,4,21,2],[40,10,21,8],[40,11,21,9,"authToken"],[40,20,21,18],[40,22,21,20,"setAuthToken"],[40,34,21,32],[40,35,21,33],[40,38,21,36],[40,42,21,36,"useState"],[40,48,21,44],[40,49,21,44,"useState"],[40,57,21,44],[40,59,21,60],[40,63,21,64],[40,64,21,65],[41,4,22,2],[41,10,22,8],[41,11,22,9,"loading"],[41,18,22,16],[41,20,22,18,"setLoading"],[41,30,22,28],[41,31,22,29],[41,34,22,32],[41,38,22,32,"useState"],[41,44,22,40],[41,45,22,40,"useState"],[41,53,22,40],[41,55,22,41],[41,59,22,45],[41,60,22,46],[42,4,24,2],[42,8,24,2,"useEffect"],[42,14,24,11],[42,15,24,11,"useEffect"],[42,24,24,11],[42,26,24,12],[42,32,24,18],[43,6,25,4,"checkAuthStatus"],[43,21,25,19],[43,22,25,20],[43,23,25,21],[44,4,26,2],[44,5,26,3],[44,7,26,5],[44,9,26,7],[44,10,26,8],[45,4,28,2],[45,10,28,8,"checkAuthStatus"],[45,25,28,23],[45,28,28,26],[45,34,28,26,"checkAuthStatus"],[45,35,28,26],[45,40,28,38],[46,6,29,4],[46,10,29,8],[47,8,30,6],[47,14,30,12,"email"],[47,19,30,17],[47,22,30,20],[47,28,30,26,"AsyncStorage"],[47,40,30,38],[47,41,30,38,"default"],[47,48,30,38],[47,49,30,39,"getItem"],[47,56,30,46],[47,57,30,47],[47,68,30,58],[47,69,30,59],[48,8,31,6],[48,14,31,12,"token"],[48,19,31,17],[48,22,31,20],[48,28,31,26,"AsyncStorage"],[48,40,31,38],[48,41,31,38,"default"],[48,48,31,38],[48,49,31,39,"getItem"],[48,56,31,46],[48,57,31,47],[48,68,31,58],[48,69,31,59],[49,8,32,6],[49,12,32,10,"email"],[49,17,32,15],[49,19,32,17],[50,10,33,8,"setIsAuthenticated"],[50,28,33,26],[50,29,33,27],[50,33,33,31],[50,34,33,32],[51,10,34,8,"setUserEmail"],[51,22,34,20],[51,23,34,21,"email"],[51,28,34,26],[51,29,34,27],[52,10,35,8,"setIsAdmin"],[52,20,35,18],[52,21,35,19,"email"],[52,26,35,24],[52,31,35,29],[52,52,35,50],[52,53,35,51],[53,10,36,8,"setAuthToken"],[53,22,36,20],[53,23,36,21,"token"],[53,28,36,26],[53,29,36,27],[54,8,37,6],[55,6,38,4],[55,7,38,5],[55,8,38,6],[55,15,38,13,"error"],[55,20,38,18],[55,22,38,20],[56,8,39,6,"console"],[56,15,39,13],[56,16,39,14,"error"],[56,21,39,19],[56,22,39,20],[56,51,39,49],[56,53,39,51,"error"],[56,58,39,56],[56,59,39,57],[57,6,40,4],[57,7,40,5],[57,16,40,14],[58,8,41,6,"setLoading"],[58,18,41,16],[58,19,41,17],[58,24,41,22],[58,25,41,23],[59,6,42,4],[60,4,43,2],[60,5,43,3],[61,4,45,2],[61,10,45,8,"login"],[61,15,45,13],[61,18,45,16],[61,24,45,16,"login"],[61,25,45,23,"email"],[61,30,45,36],[61,32,45,38,"token"],[61,37,45,52],[61,42,45,57],[62,6,46,4],[62,10,46,8],[63,8,47,6],[63,14,47,12,"AsyncStorage"],[63,26,47,24],[63,27,47,24,"default"],[63,34,47,24],[63,35,47,25,"setItem"],[63,42,47,32],[63,43,47,33],[63,54,47,44],[63,56,47,46,"email"],[63,61,47,51],[63,62,47,52],[64,8,48,6],[64,12,48,10,"token"],[64,17,48,15],[64,19,48,17],[65,10,49,8],[65,16,49,14,"AsyncStorage"],[65,28,49,26],[65,29,49,26,"default"],[65,36,49,26],[65,37,49,27,"setItem"],[65,44,49,34],[65,45,49,35],[65,56,49,46],[65,58,49,48,"token"],[65,63,49,53],[65,64,49,54],[66,8,50,6],[67,8,51,6,"setIsAuthenticated"],[67,26,51,24],[67,27,51,25],[67,31,51,29],[67,32,51,30],[68,8,52,6,"setUserEmail"],[68,20,52,18],[68,21,52,19,"email"],[68,26,52,24],[68,27,52,25],[69,8,53,6,"setIsAdmin"],[69,18,53,16],[69,19,53,17,"email"],[69,24,53,22],[69,29,53,27],[69,50,53,48],[69,51,53,49],[70,8,54,6,"setAuthToken"],[70,20,54,18],[70,21,54,19,"token"],[70,26,54,24],[70,30,54,28],[70,34,54,32],[70,35,54,33],[72,8,56,6],[73,8,57,6],[73,14,57,12,"savedLanguage"],[73,27,57,25],[73,30,57,28],[73,37,57,34,"AsyncStorage"],[73,49,57,46],[73,50,57,46,"default"],[73,57,57,46],[73,58,57,47,"getItem"],[73,65,57,54],[73,66,57,55],[73,76,57,65],[73,77,57,66],[73,82,57,70],[73,86,57,74],[74,8,58,6],[74,12,58,6,"registerForPushNotificationsAsync"],[74,35,58,39],[74,36,58,39,"registerForPushNotificationsAsync"],[74,69,58,39],[74,71,58,40,"email"],[74,76,58,45],[74,78,58,47,"savedLanguage"],[74,91,58,60],[74,92,58,61],[74,93,58,62,"catch"],[74,98,58,67],[74,99,58,68,"err"],[74,102,58,71],[74,106,59,8,"console"],[74,113,59,15],[74,114,59,16,"error"],[74,119,59,21],[74,120,59,22],[74,160,59,62],[74,162,59,64,"err"],[74,165,59,67],[74,166,60,6],[74,167,60,7],[75,6,61,4],[75,7,61,5],[75,8,61,6],[75,15,61,13,"error"],[75,20,61,18],[75,22,61,20],[76,8,62,6,"console"],[76,15,62,13],[76,16,62,14,"error"],[76,21,62,19],[76,22,62,20],[76,43,62,41],[76,45,62,43,"error"],[76,50,62,48],[76,51,62,49],[77,8,63,6],[77,14,63,12,"error"],[77,19,63,17],[78,6,64,4],[79,4,65,2],[79,5,65,3],[80,4,67,2],[80,10,67,8,"logout"],[80,16,67,14],[80,19,67,17],[80,25,67,17,"logout"],[80,26,67,17],[80,31,67,29],[81,6,68,4],[81,10,68,8],[82,8,69,6],[82,14,69,12,"AsyncStorage"],[82,26,69,24],[82,27,69,24,"default"],[82,34,69,24],[82,35,69,25,"removeItem"],[82,45,69,35],[82,46,69,36],[82,57,69,47],[82,58,69,48],[83,8,70,6],[83,14,70,12,"AsyncStorage"],[83,26,70,24],[83,27,70,24,"default"],[83,34,70,24],[83,35,70,25,"removeItem"],[83,45,70,35],[83,46,70,36],[83,57,70,47],[83,58,70,48],[84,8,71,6],[84,14,71,12,"AsyncStorage"],[84,26,71,24],[84,27,71,24,"default"],[84,34,71,24],[84,35,71,25,"removeItem"],[84,45,71,35],[84,46,71,36],[84,65,71,55],[84,66,71,56],[85,8,72,6,"setIsAuthenticated"],[85,26,72,24],[85,27,72,25],[85,32,72,30],[85,33,72,31],[86,8,73,6,"setUserEmail"],[86,20,73,18],[86,21,73,19],[86,25,73,23],[86,26,73,24],[87,8,74,6,"setIsAdmin"],[87,18,74,16],[87,19,74,17],[87,24,74,22],[87,25,74,23],[88,8,75,6,"setAuthToken"],[88,20,75,18],[88,21,75,19],[88,25,75,23],[88,26,75,24],[89,6,76,4],[89,7,76,5],[89,8,76,6],[89,15,76,13,"error"],[89,20,76,18],[89,22,76,20],[90,8,77,6,"console"],[90,15,77,13],[90,16,77,14,"error"],[90,21,77,19],[90,22,77,20],[90,44,77,42],[90,46,77,44,"error"],[90,51,77,49],[90,52,77,50],[91,8,78,6],[91,14,78,12,"error"],[91,19,78,17],[92,6,79,4],[93,4,80,2],[93,5,80,3],[94,4,82,2],[94,24,83,4],[94,28,83,4,"_reactJsxDevRuntime"],[94,47,83,4],[94,48,83,4,"jsxDEV"],[94,54,83,4],[94,56,83,5,"AuthContext"],[94,67,83,16],[94,68,83,17,"Provider"],[94,76,83,25],[95,6,83,26,"value"],[95,11,83,31],[95,13,83,33],[96,8,83,35,"isAuthenticated"],[96,23,83,50],[97,8,83,52,"userEmail"],[97,17,83,61],[98,8,83,63,"isAdmin"],[98,15,83,70],[99,8,83,72,"authToken"],[99,17,83,81],[100,8,83,83,"login"],[100,13,83,88],[101,8,83,90,"logout"],[101,14,83,96],[102,8,83,98,"loading"],[103,6,83,106],[103,7,83,108],[104,6,83,108,"children"],[104,14,83,108],[104,16,84,7,"children"],[105,4,84,15],[106,6,84,15,"fileName"],[106,14,84,15],[106,16,84,15,"_jsxFileName"],[106,28,84,15],[107,6,84,15,"lineNumber"],[107,16,84,15],[108,6,84,15,"columnNumber"],[108,18,84,15],[109,4,84,15],[109,11,85,26],[109,12,85,27],[110,2,87,0],[110,3,87,1],[111,2,87,2,"_s"],[111,4,87,2],[111,5,17,13,"AuthProvider"],[111,17,17,25],[112,2,17,25,"_c"],[112,4,17,25],[112,7,17,13,"AuthProvider"],[112,19,17,25],[113,2,89,7],[113,8,89,13,"useAuth"],[113,15,89,20],[113,18,89,23,"useAuth"],[113,19,89,23],[113,24,89,29],[114,4,89,29,"_s2"],[114,7,89,29],[115,4,90,2],[115,10,90,8,"context"],[115,17,90,15],[115,20,90,18],[115,24,90,18,"useContext"],[115,30,90,28],[115,31,90,28,"useContext"],[115,41,90,28],[115,43,90,29,"AuthContext"],[115,54,90,40],[115,55,90,41],[116,4,91,2],[116,8,91,6],[116,9,91,7,"context"],[116,16,91,14],[116,18,91,16],[117,6,92,4],[117,12,92,10],[117,16,92,14,"Error"],[117,21,92,19],[117,22,92,20],[117,64,92,62],[117,65,92,63],[118,4,93,2],[119,4,94,2],[119,11,94,9,"context"],[119,18,94,16],[120,2,95,0],[120,3,95,1],[121,2,95,2,"_s2"],[121,5,95,2],[121,6,89,13,"useAuth"],[121,13,89,20],[122,2,89,20],[122,6,89,20,"_c"],[122,8,89,20],[123,2,89,20,"$RefreshReg$"],[123,14,89,20],[123,15,89,20,"_c"],[123,17,89,20],[124,0,89,20],[124,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuthStatus","login","registerForPushNotificationsAsync._catch$argument_0","logout","useAuth"],"mappings":"AAA;4BCgB;YCO;GDE;0BEE;GFe;gBGE;oECa;oEDC;GHM;iBKE;GLa;CDO;uBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}