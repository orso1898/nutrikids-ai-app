{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/pushNotifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":136,"index":296}}],"key":"pacSeurS2lh+gpQJVOM5Oqathn8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _utilsPushNotifications = require(_dependencyMap[2], \"../utils/pushNotifications\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [isAuthenticated, setIsAuthenticated] = (0, _react.useState)(false);\n    const [userEmail, setUserEmail] = (0, _react.useState)(null);\n    const [isAdmin, setIsAdmin] = (0, _react.useState)(false);\n    const [authToken, setAuthToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuthStatus();\n    }, []);\n\n    // Setup notification listeners\n    (0, _react.useEffect)(() => {\n      const listeners = (0, _utilsPushNotifications.setupNotificationListeners)();\n      return () => {\n        (0, _utilsPushNotifications.removeNotificationListeners)(listeners);\n      };\n    }, []);\n    const checkAuthStatus = async () => {\n      try {\n        const email = await AsyncStorage.default.getItem('userEmail');\n        const token = await AsyncStorage.default.getItem('authToken');\n        if (email) {\n          setIsAuthenticated(true);\n          setUserEmail(email);\n          setIsAdmin(email === 'admin@nutrikids.com');\n          setAuthToken(token);\n        }\n      } catch (error) {\n        console.error('Error checking auth status:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, token) => {\n      try {\n        await AsyncStorage.default.setItem('userEmail', email);\n        if (token) {\n          await AsyncStorage.default.setItem('authToken', token);\n        }\n        setIsAuthenticated(true);\n        setUserEmail(email);\n        setIsAdmin(email === 'admin@nutrikids.com');\n        setAuthToken(token || null);\n\n        // Registra per le notifiche push - ottieni la lingua da AsyncStorage\n        const savedLanguage = (await AsyncStorage.default.getItem('language')) || 'it';\n        (0, _utilsPushNotifications.registerForPushNotificationsAsync)(email, savedLanguage).catch(err => console.error('Failed to register push notifications:', err));\n      } catch (error) {\n        console.error('Error during login:', error);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('userEmail');\n        await AsyncStorage.default.removeItem('authToken');\n        await AsyncStorage.default.removeItem('hasSeenOnboarding');\n        setIsAuthenticated(false);\n        setUserEmail(null);\n        setIsAdmin(false);\n        setAuthToken(null);\n      } catch (error) {\n        console.error('Error during logout:', error);\n        throw error;\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        isAuthenticated,\n        userEmail,\n        isAdmin,\n        authToken,\n        login,\n        logout,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"ry6cyM4/DMy166b3wNCNtv5iv6Y=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":132,"map":[[15,2,17,0,"Object"],[15,8,17,0],[15,9,17,0,"defineProperty"],[15,23,17,0],[15,24,17,0,"exports"],[15,31,17,0],[16,4,17,0,"enumerable"],[16,14,17,0],[17,4,17,0,"get"],[17,7,17,0],[17,18,17,0,"get"],[17,19,17,0],[18,6,17,0],[18,13,17,0,"AuthProvider"],[18,25,17,0],[19,4,17,0],[20,2,17,0],[21,2,97,0,"Object"],[21,8,97,0],[21,9,97,0,"defineProperty"],[21,23,97,0],[21,24,97,0,"exports"],[21,31,97,0],[22,4,97,0,"enumerable"],[22,14,97,0],[23,4,97,0,"get"],[23,7,97,0],[23,18,97,0,"get"],[23,19,97,0],[24,6,97,0],[24,13,97,0,"useAuth"],[24,20,97,0],[25,4,97,0],[26,2,97,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,2,0],[28,45,2,0,"require"],[28,52,2,0],[28,53,2,0,"_dependencyMap"],[28,67,2,0],[29,2,2,0],[29,6,2,0,"AsyncStorage"],[29,18,2,0],[29,21,2,0,"_interopDefault"],[29,36,2,0],[29,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,2,0],[30,2,3,0],[30,6,3,0,"_utilsPushNotifications"],[30,29,3,0],[30,32,3,0,"require"],[30,39,3,0],[30,40,3,0,"_dependencyMap"],[30,54,3,0],[31,2,3,136],[31,6,3,136,"_reactJsxDevRuntime"],[31,25,3,136],[31,28,3,136,"require"],[31,35,3,136],[31,36,3,136,"_dependencyMap"],[31,50,3,136],[32,2,15,0],[32,8,15,6,"AuthContext"],[32,19,15,17],[32,35,15,20],[32,39,15,20,"createContext"],[32,45,15,33],[32,46,15,33,"createContext"],[32,59,15,33],[32,61,15,63,"undefined"],[32,70,15,72],[32,71,15,73],[33,2,17,7],[33,8,17,13,"AuthProvider"],[33,20,17,25],[33,23,17,28,"AuthProvider"],[33,24,17,29],[34,4,17,31,"children"],[35,2,17,65],[35,3,17,66],[35,8,17,71],[36,4,17,71,"_s"],[36,6,17,71],[37,4,18,2],[37,10,18,8],[37,11,18,9,"isAuthenticated"],[37,26,18,24],[37,28,18,26,"setIsAuthenticated"],[37,46,18,44],[37,47,18,45],[37,50,18,48],[37,54,18,48,"useState"],[37,60,18,56],[37,61,18,56,"useState"],[37,69,18,56],[37,71,18,57],[37,76,18,62],[37,77,18,63],[38,4,19,2],[38,10,19,8],[38,11,19,9,"userEmail"],[38,20,19,18],[38,22,19,20,"setUserEmail"],[38,34,19,32],[38,35,19,33],[38,38,19,36],[38,42,19,36,"useState"],[38,48,19,44],[38,49,19,44,"useState"],[38,57,19,44],[38,59,19,60],[38,63,19,64],[38,64,19,65],[39,4,20,2],[39,10,20,8],[39,11,20,9,"isAdmin"],[39,18,20,16],[39,20,20,18,"setIsAdmin"],[39,30,20,28],[39,31,20,29],[39,34,20,32],[39,38,20,32,"useState"],[39,44,20,40],[39,45,20,40,"useState"],[39,53,20,40],[39,55,20,41],[39,60,20,46],[39,61,20,47],[40,4,21,2],[40,10,21,8],[40,11,21,9,"authToken"],[40,20,21,18],[40,22,21,20,"setAuthToken"],[40,34,21,32],[40,35,21,33],[40,38,21,36],[40,42,21,36,"useState"],[40,48,21,44],[40,49,21,44,"useState"],[40,57,21,44],[40,59,21,60],[40,63,21,64],[40,64,21,65],[41,4,22,2],[41,10,22,8],[41,11,22,9,"loading"],[41,18,22,16],[41,20,22,18,"setLoading"],[41,30,22,28],[41,31,22,29],[41,34,22,32],[41,38,22,32,"useState"],[41,44,22,40],[41,45,22,40,"useState"],[41,53,22,40],[41,55,22,41],[41,59,22,45],[41,60,22,46],[42,4,24,2],[42,8,24,2,"useEffect"],[42,14,24,11],[42,15,24,11,"useEffect"],[42,24,24,11],[42,26,24,12],[42,32,24,18],[43,6,25,4,"checkAuthStatus"],[43,21,25,19],[43,22,25,20],[43,23,25,21],[44,4,26,2],[44,5,26,3],[44,7,26,5],[44,9,26,7],[44,10,26,8],[46,4,28,2],[47,4,29,2],[47,8,29,2,"useEffect"],[47,14,29,11],[47,15,29,11,"useEffect"],[47,24,29,11],[47,26,29,12],[47,32,29,18],[48,6,30,4],[48,12,30,10,"listeners"],[48,21,30,19],[48,24,30,22],[48,28,30,22,"setupNotificationListeners"],[48,51,30,48],[48,52,30,48,"setupNotificationListeners"],[48,78,30,48],[48,80,30,49],[48,81,30,50],[49,6,31,4],[49,13,31,11],[49,19,31,17],[50,8,32,6],[50,12,32,6,"removeNotificationListeners"],[50,35,32,33],[50,36,32,33,"removeNotificationListeners"],[50,63,32,33],[50,65,32,34,"listeners"],[50,74,32,43],[50,75,32,44],[51,6,33,4],[51,7,33,5],[52,4,34,2],[52,5,34,3],[52,7,34,5],[52,9,34,7],[52,10,34,8],[53,4,36,2],[53,10,36,8,"checkAuthStatus"],[53,25,36,23],[53,28,36,26],[53,34,36,26,"checkAuthStatus"],[53,35,36,26],[53,40,36,38],[54,6,37,4],[54,10,37,8],[55,8,38,6],[55,14,38,12,"email"],[55,19,38,17],[55,22,38,20],[55,28,38,26,"AsyncStorage"],[55,40,38,38],[55,41,38,38,"default"],[55,48,38,38],[55,49,38,39,"getItem"],[55,56,38,46],[55,57,38,47],[55,68,38,58],[55,69,38,59],[56,8,39,6],[56,14,39,12,"token"],[56,19,39,17],[56,22,39,20],[56,28,39,26,"AsyncStorage"],[56,40,39,38],[56,41,39,38,"default"],[56,48,39,38],[56,49,39,39,"getItem"],[56,56,39,46],[56,57,39,47],[56,68,39,58],[56,69,39,59],[57,8,40,6],[57,12,40,10,"email"],[57,17,40,15],[57,19,40,17],[58,10,41,8,"setIsAuthenticated"],[58,28,41,26],[58,29,41,27],[58,33,41,31],[58,34,41,32],[59,10,42,8,"setUserEmail"],[59,22,42,20],[59,23,42,21,"email"],[59,28,42,26],[59,29,42,27],[60,10,43,8,"setIsAdmin"],[60,20,43,18],[60,21,43,19,"email"],[60,26,43,24],[60,31,43,29],[60,52,43,50],[60,53,43,51],[61,10,44,8,"setAuthToken"],[61,22,44,20],[61,23,44,21,"token"],[61,28,44,26],[61,29,44,27],[62,8,45,6],[63,6,46,4],[63,7,46,5],[63,8,46,6],[63,15,46,13,"error"],[63,20,46,18],[63,22,46,20],[64,8,47,6,"console"],[64,15,47,13],[64,16,47,14,"error"],[64,21,47,19],[64,22,47,20],[64,51,47,49],[64,53,47,51,"error"],[64,58,47,56],[64,59,47,57],[65,6,48,4],[65,7,48,5],[65,16,48,14],[66,8,49,6,"setLoading"],[66,18,49,16],[66,19,49,17],[66,24,49,22],[66,25,49,23],[67,6,50,4],[68,4,51,2],[68,5,51,3],[69,4,53,2],[69,10,53,8,"login"],[69,15,53,13],[69,18,53,16],[69,24,53,16,"login"],[69,25,53,23,"email"],[69,30,53,36],[69,32,53,38,"token"],[69,37,53,52],[69,42,53,57],[70,6,54,4],[70,10,54,8],[71,8,55,6],[71,14,55,12,"AsyncStorage"],[71,26,55,24],[71,27,55,24,"default"],[71,34,55,24],[71,35,55,25,"setItem"],[71,42,55,32],[71,43,55,33],[71,54,55,44],[71,56,55,46,"email"],[71,61,55,51],[71,62,55,52],[72,8,56,6],[72,12,56,10,"token"],[72,17,56,15],[72,19,56,17],[73,10,57,8],[73,16,57,14,"AsyncStorage"],[73,28,57,26],[73,29,57,26,"default"],[73,36,57,26],[73,37,57,27,"setItem"],[73,44,57,34],[73,45,57,35],[73,56,57,46],[73,58,57,48,"token"],[73,63,57,53],[73,64,57,54],[74,8,58,6],[75,8,59,6,"setIsAuthenticated"],[75,26,59,24],[75,27,59,25],[75,31,59,29],[75,32,59,30],[76,8,60,6,"setUserEmail"],[76,20,60,18],[76,21,60,19,"email"],[76,26,60,24],[76,27,60,25],[77,8,61,6,"setIsAdmin"],[77,18,61,16],[77,19,61,17,"email"],[77,24,61,22],[77,29,61,27],[77,50,61,48],[77,51,61,49],[78,8,62,6,"setAuthToken"],[78,20,62,18],[78,21,62,19,"token"],[78,26,62,24],[78,30,62,28],[78,34,62,32],[78,35,62,33],[80,8,64,6],[81,8,65,6],[81,14,65,12,"savedLanguage"],[81,27,65,25],[81,30,65,28],[81,37,65,34,"AsyncStorage"],[81,49,65,46],[81,50,65,46,"default"],[81,57,65,46],[81,58,65,47,"getItem"],[81,65,65,54],[81,66,65,55],[81,76,65,65],[81,77,65,66],[81,82,65,70],[81,86,65,74],[82,8,66,6],[82,12,66,6,"registerForPushNotificationsAsync"],[82,35,66,39],[82,36,66,39,"registerForPushNotificationsAsync"],[82,69,66,39],[82,71,66,40,"email"],[82,76,66,45],[82,78,66,47,"savedLanguage"],[82,91,66,60],[82,92,66,61],[82,93,66,62,"catch"],[82,98,66,67],[82,99,66,68,"err"],[82,102,66,71],[82,106,67,8,"console"],[82,113,67,15],[82,114,67,16,"error"],[82,119,67,21],[82,120,67,22],[82,160,67,62],[82,162,67,64,"err"],[82,165,67,67],[82,166,68,6],[82,167,68,7],[83,6,69,4],[83,7,69,5],[83,8,69,6],[83,15,69,13,"error"],[83,20,69,18],[83,22,69,20],[84,8,70,6,"console"],[84,15,70,13],[84,16,70,14,"error"],[84,21,70,19],[84,22,70,20],[84,43,70,41],[84,45,70,43,"error"],[84,50,70,48],[84,51,70,49],[85,8,71,6],[85,14,71,12,"error"],[85,19,71,17],[86,6,72,4],[87,4,73,2],[87,5,73,3],[88,4,75,2],[88,10,75,8,"logout"],[88,16,75,14],[88,19,75,17],[88,25,75,17,"logout"],[88,26,75,17],[88,31,75,29],[89,6,76,4],[89,10,76,8],[90,8,77,6],[90,14,77,12,"AsyncStorage"],[90,26,77,24],[90,27,77,24,"default"],[90,34,77,24],[90,35,77,25,"removeItem"],[90,45,77,35],[90,46,77,36],[90,57,77,47],[90,58,77,48],[91,8,78,6],[91,14,78,12,"AsyncStorage"],[91,26,78,24],[91,27,78,24,"default"],[91,34,78,24],[91,35,78,25,"removeItem"],[91,45,78,35],[91,46,78,36],[91,57,78,47],[91,58,78,48],[92,8,79,6],[92,14,79,12,"AsyncStorage"],[92,26,79,24],[92,27,79,24,"default"],[92,34,79,24],[92,35,79,25,"removeItem"],[92,45,79,35],[92,46,79,36],[92,65,79,55],[92,66,79,56],[93,8,80,6,"setIsAuthenticated"],[93,26,80,24],[93,27,80,25],[93,32,80,30],[93,33,80,31],[94,8,81,6,"setUserEmail"],[94,20,81,18],[94,21,81,19],[94,25,81,23],[94,26,81,24],[95,8,82,6,"setIsAdmin"],[95,18,82,16],[95,19,82,17],[95,24,82,22],[95,25,82,23],[96,8,83,6,"setAuthToken"],[96,20,83,18],[96,21,83,19],[96,25,83,23],[96,26,83,24],[97,6,84,4],[97,7,84,5],[97,8,84,6],[97,15,84,13,"error"],[97,20,84,18],[97,22,84,20],[98,8,85,6,"console"],[98,15,85,13],[98,16,85,14,"error"],[98,21,85,19],[98,22,85,20],[98,44,85,42],[98,46,85,44,"error"],[98,51,85,49],[98,52,85,50],[99,8,86,6],[99,14,86,12,"error"],[99,19,86,17],[100,6,87,4],[101,4,88,2],[101,5,88,3],[102,4,90,2],[102,24,91,4],[102,28,91,4,"_reactJsxDevRuntime"],[102,47,91,4],[102,48,91,4,"jsxDEV"],[102,54,91,4],[102,56,91,5,"AuthContext"],[102,67,91,16],[102,68,91,17,"Provider"],[102,76,91,25],[103,6,91,26,"value"],[103,11,91,31],[103,13,91,33],[104,8,91,35,"isAuthenticated"],[104,23,91,50],[105,8,91,52,"userEmail"],[105,17,91,61],[106,8,91,63,"isAdmin"],[106,15,91,70],[107,8,91,72,"authToken"],[107,17,91,81],[108,8,91,83,"login"],[108,13,91,88],[109,8,91,90,"logout"],[109,14,91,96],[110,8,91,98,"loading"],[111,6,91,106],[111,7,91,108],[112,6,91,108,"children"],[112,14,91,108],[112,16,92,7,"children"],[113,4,92,15],[114,6,92,15,"fileName"],[114,14,92,15],[114,16,92,15,"_jsxFileName"],[114,28,92,15],[115,6,92,15,"lineNumber"],[115,16,92,15],[116,6,92,15,"columnNumber"],[116,18,92,15],[117,4,92,15],[117,11,93,26],[117,12,93,27],[118,2,95,0],[118,3,95,1],[119,2,95,2,"_s"],[119,4,95,2],[119,5,17,13,"AuthProvider"],[119,17,17,25],[120,2,17,25,"_c"],[120,4,17,25],[120,7,17,13,"AuthProvider"],[120,19,17,25],[121,2,97,7],[121,8,97,13,"useAuth"],[121,15,97,20],[121,18,97,23,"useAuth"],[121,19,97,23],[121,24,97,29],[122,4,97,29,"_s2"],[122,7,97,29],[123,4,98,2],[123,10,98,8,"context"],[123,17,98,15],[123,20,98,18],[123,24,98,18,"useContext"],[123,30,98,28],[123,31,98,28,"useContext"],[123,41,98,28],[123,43,98,29,"AuthContext"],[123,54,98,40],[123,55,98,41],[124,4,99,2],[124,8,99,6],[124,9,99,7,"context"],[124,16,99,14],[124,18,99,16],[125,6,100,4],[125,12,100,10],[125,16,100,14,"Error"],[125,21,100,19],[125,22,100,20],[125,64,100,62],[125,65,100,63],[126,4,101,2],[127,4,102,2],[127,11,102,9,"context"],[127,18,102,16],[128,2,103,0],[128,3,103,1],[129,2,103,2,"_s2"],[129,5,103,2],[129,6,97,13,"useAuth"],[129,13,97,20],[130,2,97,20],[130,6,97,20,"_c"],[130,8,97,20],[131,2,97,20,"$RefreshReg$"],[131,14,97,20],[131,15,97,20,"_c"],[131,17,97,20],[132,0,97,20],[132,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","<anonymous>","checkAuthStatus","login","registerForPushNotificationsAsync._catch$argument_0","logout","useAuth"],"mappings":"AAA;4BCgB;YCO;GDE;YCG;WCE;KDE;GDC;0BGE;GHe;gBIE;oECa;oEDC;GJM;iBME;GNa;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}